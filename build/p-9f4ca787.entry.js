import{r as i,c as t,h as e,H as s,g as a}from"./p-c9ba45b0.js";import{a as l,s as n}from"./p-774fbe58.js";import{u as o,s as c,c as r,d}from"./p-3c05e9bf.js";import{n as h,c as v,d as u}from"./p-909ebb2d.js";import{g as b}from"./p-28de0941.js";import"./p-1631d2a0.js";import"./p-ab6a0f88.js";import"./p-25d4ba13.js";import"./p-6ceba8f9.js";import"./p-3f298b29.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.8.0
 */const f={bordered:"bordered",striped:"striped",selectionArea:"selection-area",paginationArea:"pagination-area",container:"container",tableContainer:"table-container",tableFixed:"table--fixed",assistiveText:"assistive-text",selectionActions:"selection-actions"};const p={selectionActions:"selection-actions",tableHeader:"table-header",tableFooter:"table-footer"};const g=":host([scale=s]){--calcite-internal-table-cell-padding:0.25rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--2);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--3)}:host([scale=m]){--calcite-internal-table-cell-padding:0.5rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--1);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--2)}:host([scale=l]){--calcite-internal-table-cell-padding:1rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size-0);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--1)}:host{display:flex}.container{display:flex;block-size:100%;inline-size:100%;flex-direction:column}.table-container{overflow:auto;white-space:nowrap;border:1px solid var(--calcite-color-border-3)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}table{inline-size:100%;border-collapse:collapse;overflow-x:scroll}.table--fixed{table-layout:fixed}.bordered ::slotted(calcite-table-row){--calcite-table-row-border-color:var(--calcite-color-border-3)}.striped ::slotted(calcite-table-row:nth-child(2n+1)){--calcite-table-row-background:var(--calcite-color-foreground-2)}.selection-actions{display:flex;flex-direction:row;margin-inline-start:auto}.selection-area{display:flex;flex-direction:row;align-items:center;padding-block:var(--calcite-internal-table-cell-padding)}.selection-area calcite-chip:last-of-type{margin-inline-end:0.5rem}.selection-area calcite-chip:last-of-type:not(:first-of-type){margin-inline-start:0.5rem}.selection-area calcite-button{margin-inline-end:1rem}.pagination-area{display:flex;inline-size:100%;flex-direction:row;justify-content:center;padding-block:var(--calcite-internal-table-cell-padding)}calcite-pagination{flex:1;justify-content:center}:host([hidden]){display:none}[hidden]{display:none}";const m=class{constructor(e){i(this,e);this.calciteTableSelect=t(this,"calciteTableSelect",6);this.calciteTablePageChange=t(this,"calciteTablePageChange",6);this.calciteInternalTableRowFocusChange=t(this,"calciteInternalTableRowFocusChange",6);this.getSlottedRows=i=>{var t;return(t=i===null||i===void 0?void 0:i.assignedElements({flatten:true}))===null||t===void 0?void 0:t.filter((i=>i===null||i===void 0?void 0:i.matches("calcite-table-row")))};this.updateRows=()=>{var i,t,e;const s=this.getSlottedRows(this.tableHeadSlotEl)||[];const a=this.getSlottedRows(this.tableBodySlotEl)||[];const l=this.getSlottedRows(this.tableFootSlotEl)||[];const n=[...s,...a,...l];s===null||s===void 0?void 0:s.forEach((i=>{const t=s===null||s===void 0?void 0:s.indexOf(i);i.rowType="head";i.positionSection=t;i.positionSectionLocalized=this.localizeNumber((t+1).toString())}));a===null||a===void 0?void 0:a.forEach((i=>{const t=a===null||a===void 0?void 0:a.indexOf(i);i.rowType="body";i.positionSection=t;i.positionSectionLocalized=this.localizeNumber((t+1).toString())}));l===null||l===void 0?void 0:l.forEach((i=>{const t=l===null||l===void 0?void 0:l.indexOf(i);i.rowType="foot";i.positionSection=t;i.positionSectionLocalized=this.localizeNumber((t+1).toString())}));n===null||n===void 0?void 0:n.forEach((i=>{i.interactionMode=this.interactionMode;i.selectionMode=this.selectionMode;i.bodyRowCount=a===null||a===void 0?void 0:a.length;i.positionAll=n===null||n===void 0?void 0:n.indexOf(i);i.numbered=this.numbered;i.scale=this.scale;i.readCellContentsToAT=this.readCellContentsToAT;i.lastVisibleRow=(n===null||n===void 0?void 0:n.indexOf(i))===n.length-1}));const o=((i=s[0])===null||i===void 0?void 0:i.cellCount)||((e=(t=s[0])===null||t===void 0?void 0:t.querySelectorAll("calcite-table-header"))===null||e===void 0?void 0:e.length);this.colCount=o;this.headRows=s;this.bodyRows=a;this.footRows=l;this.allRows=n;this.updateSelectedItems();this.paginateRows()};this.handlePaginationChange=()=>{var i;const t=(i=this.paginationEl)===null||i===void 0?void 0:i.startItem;this.pageStartRow=t||1;this.calciteTablePageChange.emit();this.updateRows()};this.paginateRows=()=>{var i;(i=this.bodyRows)===null||i===void 0?void 0:i.forEach((i=>{const t=i.positionSection+1;const e=t>=this.pageStartRow&&t<this.pageStartRow+this.pageSize;i.hidden=this.pageSize>0&&!e&&!this.footRows.includes(i);i.lastVisibleRow=t===this.pageStartRow+this.pageSize-1||t===this.bodyRows.length}))};this.updateSelectedItems=i=>{var t,e;const s=(t=this.bodyRows)===null||t===void 0?void 0:t.filter((i=>i.selected));this.selectedItems=s;this.selectedCount=s===null||s===void 0?void 0:s.length;(e=this.allRows)===null||e===void 0?void 0:e.forEach((i=>{i.selectedRowCount=this.selectedCount;i.selectedRowCountLocalized=this.localizeNumber(this.selectedCount)}));if(i){this.calciteTableSelect.emit()}};this.handleDeselectAllRows=()=>{var i;(i=this.bodyRows)===null||i===void 0?void 0:i.forEach((i=>{i.selected=false}));this.updateSelectedItems(true)};this.setSelectedItems=i=>{var t;(t=this.bodyRows)===null||t===void 0?void 0:t.forEach((t=>{var e;if((i===null||i===void 0?void 0:i.rowType)==="head"){t.selected=this.selectedCount!==((e=this.bodyRows)===null||e===void 0?void 0:e.length)}else{t.selected=i===t?!t.selected:this.selectionMode==="multiple"?t.selected:false}}));this.updateSelectedItems(true)};this.localizeNumber=i=>{h.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};return h.localize(i.toString())};this.bordered=false;this.caption=undefined;this.groupSeparator=false;this.interactionMode="interactive";this.layout="auto";this.numbered=false;this.numberingSystem=undefined;this.pageSize=0;this.scale="m";this.selectionMode="none";this.zebra=false;this.striped=false;this.selectedItems=[];this.messages=undefined;this.messageOverrides=undefined;this.colCount=0;this.pageStartRow=1;this.selectedCount=0;this.readCellContentsToAT=undefined;this.defaultMessages=undefined;this.effectiveLocale=""}handleNumberedChange(){this.updateRows()}onMessagesChange(){}effectiveLocaleChange(){o(this,this.effectiveLocale)}async componentWillLoad(){l(this);await c(this);this.readCellContentsToAT=/safari/i.test(b());this.updateRows()}componentDidLoad(){n(this)}connectedCallback(){v(this);r(this)}disconnectedCallback(){u(this);d(this)}calciteChipSelectListener(i){if(i.composedPath().includes(this.el)){this.setSelectedItems(i.target)}}calciteInternalTableRowFocusEvent(i){var t,e,s,a,l,n,o,c,r;const d=i["detail"].cellPosition;const h=i["detail"].rowPosition;const v=i["detail"].destination;const u=i["detail"].lastCell;const b=(t=this.bodyRows)===null||t===void 0?void 0:t.filter((i=>!i.hidden));const f=(e=this.allRows)===null||e===void 0?void 0:e.filter((i=>!i.hidden));const p=(s=this.headRows[this.headRows.length-1])===null||s===void 0?void 0:s.positionAll;const g=(a=b[0])===null||a===void 0?void 0:a.positionAll;const m=(l=b[b.length-1])===null||l===void 0?void 0:l.positionAll;const y=(n=this.footRows[0])===null||n===void 0?void 0:n.positionAll;const x=(o=f[f.length-1])===null||o===void 0?void 0:o.positionAll;const w=v==="next"&&h===p;const C=v==="previous"&&h===y;const z=v==="previous"&&h===g;const k=v==="next"&&h===m;let S;switch(v){case"first":S=0;break;case"last":S=x;break;case"next":S=w?g:k?y:h+1;break;case"previous":S=C?m:z?p:h-1;break}const j=(r=(c=this.allRows)===null||c===void 0?void 0:c.find((i=>i.positionAll===S)))===null||r===void 0?void 0:r.cellCount;const N=d>j?j:d;if(S!==undefined){this.calciteInternalTableRowFocusChange.emit({cellPosition:N,rowPosition:S,destination:v,lastCell:u})}}renderSelectionArea(){var i,t,s;const a=(t=(i=this.selectedItems)===null||i===void 0?void 0:i.filter((i=>i.hidden)))===null||t===void 0?void 0:t.length;const l=this.localizeNumber(a===null||a===void 0?void 0:a.toString());const n=this.localizeNumber((s=this.selectedCount)===null||s===void 0?void 0:s.toString());const o=`${n} ${this.messages.selected}`;const c=`${l} ${this.messages.hiddenSelected}`;return e("div",{class:f.selectionArea},e("calcite-chip",{kind:this.selectedCount>0?"brand":"neutral",scale:this.scale,value:o},o),a>0&&e("calcite-chip",{icon:"hide-empty",scale:this.scale,title:c,value:c},l),this.selectedCount>0&&e("calcite-button",{"icon-start":"x",kind:"neutral",onClick:this.handleDeselectAllRows,round:true,scale:this.scale,title:`${this.messages.clear} ${o} ${this.messages.row}`},this.messages.clear),e("div",{class:f.selectionActions},e("slot",{name:p.selectionActions})))}renderPaginationArea(){var i;return e("div",{class:f.paginationArea},e("calcite-pagination",{groupSeparator:this.groupSeparator,numberingSystem:this.numberingSystem,onCalcitePaginationChange:this.handlePaginationChange,pageSize:this.pageSize,scale:this.scale,startItem:1,totalItems:(i=this.bodyRows)===null||i===void 0?void 0:i.length,ref:i=>this.paginationEl=i}))}renderTHead(){return e("thead",null,e("slot",{name:p.tableHeader,onSlotchange:this.updateRows,ref:i=>this.tableHeadSlotEl=i}))}renderTBody(){return e("tbody",null,e("slot",{onSlotchange:this.updateRows,ref:i=>this.tableBodySlotEl=i}))}renderTFoot(){return e("tfoot",null,e("slot",{name:p.tableFooter,onSlotchange:this.updateRows,ref:i=>this.tableFootSlotEl=i}))}render(){var i;return e(s,{key:"ef7ccc8c38ffa6a1f2168194360d210d95c93586"},e("div",{key:"5e6c5971b1175ea268c863b394295024d27b30da",class:f.container},this.selectionMode!=="none"&&this.renderSelectionArea(),e("div",{key:"668438589e52c53f20d9a9c97fd732bb5a423175",class:{[f.bordered]:this.bordered,[f.striped]:this.striped||this.zebra,[f.tableContainer]:true}},e("table",{key:"c8b35b353d207b4eab3a973a242e38c67642bba3","aria-colcount":this.colCount,"aria-multiselectable":this.selectionMode==="multiple","aria-rowcount":(i=this.allRows)===null||i===void 0?void 0:i.length,class:{[f.tableFixed]:this.layout==="fixed"},role:this.interactionMode==="interactive"?"grid":"table"},e("caption",{key:"1f5b24d93dc5a715f946e38e3dde002b7ba614ff",class:f.assistiveText},this.caption),this.renderTHead(),this.renderTBody(),this.renderTFoot())),this.pageSize>0&&this.renderPaginationArea()))}static get assetsDirs(){return["assets"]}get el(){return a(this)}static get watchers(){return{groupSeparator:["handleNumberedChange"],interactionMode:["handleNumberedChange"],numbered:["handleNumberedChange"],numberingSystem:["handleNumberedChange"],pageSize:["handleNumberedChange"],scale:["handleNumberedChange"],selectionMode:["handleNumberedChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}};m.style=g;export{m as calcite_table};
//# sourceMappingURL=p-9f4ca787.entry.js.map