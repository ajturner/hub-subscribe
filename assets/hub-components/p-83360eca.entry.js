import{r as t,c as e,h as i,a}from"./p-d4ba4c14.js";import{b as o}from"./p-fd260f2d.js";import{a as s}from"./p-a43eca06.js";import{i as r}from"./p-be5c5009.js";import"./p-dfe5a97d.js";const l=class{constructor(i){t(this,i),this.arcgisHubInputColorChange=e(this,"arcgisHubInputColorChange",7),this.storageId="saved-colors",this.value=void 0,this.disabled=!1,this.required=!1,this.label=void 0,this.placeholder=void 0,this.savedColors=[],this.status="idle",this._colorPickerColor=void 0,o(this,"handleColorPickerChange","handleInputInput","setColorPickerEl")}handleValueChanged(t){this.setColor(t)}handleColorPickerChange(t){var e;t.stopPropagation();const i=null!==(e=this.colorPickerEl.value)&&void 0!==e?e:"";if(i===this.value)return;const a=this.setColor(i);this.emitChangeEvent(i,a)}handleInputInput(t){var e;t.stopPropagation();const i=null!==(e=t.target.value)&&void 0!==e?e:"",a=this.setColor(i);this.emitChangeEvent(i,a)}async componentWillLoad(){this.intl=await r.loadIntlForComponent(this.element),localStorage.setItem(`calcite-color-${this.storageId}`,JSON.stringify(this.savedColors));const t=new s({allErrors:!0});t.addFormat("hex-color",this.required?/^#(?:[0-9a-fA-F]{6})$/:/^$|^#(?:[0-9a-fA-F]{6})$/),this.validator=t.compile({type:"object",properties:{color:{type:"string",format:"hex-color"}}}),this.setColor(this.value)}validate(t=""){const e=this.validator({color:t});return e?{valid:e}:{valid:e,errors:this.validator.errors}}emitChangeEvent(t,e){if(this.disabled)return;const{valid:i}=e,a={valid:i};i&&(a.value=t),this.arcgisHubInputColorChange.emit(a)}setColor(t){const e=this.validate(t),{valid:i}=e;return this.value=t,i&&(this.element.style.setProperty("--swatch-color",t),this._colorPickerColor=t),this.status=i?"valid":"invalid",e}setColorPickerEl(t){this.colorPickerEl=t}render(){return i("calcite-popover-manager",{"auto-close":!0},i("calcite-input",{disabled:this.disabled,label:this.label,onCalciteInputInput:this.handleInputInput,placeholder:this.placeholder,status:this.status,value:this.value},i("calcite-button",{appearance:"outline",disabled:this.disabled,id:"color-picker-toggle-button",label:this.intl.t("colorPickerToggleButtonLabel"),slot:"action"},i("div",{class:{swatch:!0,"no-color":!this.value}},"Â "))),i("calcite-popover",{autoClose:!0,label:this.intl.t("popoverLabel"),placement:"auto",pointerDisabled:!0,referenceElement:"color-picker-toggle-button"},i("calcite-color-picker",{allowEmpty:!this.required,format:"hex",onCalciteColorPickerChange:this.handleColorPickerChange,ref:this.setColorPickerEl,scale:"m",storageId:this.storageId,value:this._colorPickerColor})))}static get assetsDirs(){return["locales"]}get element(){return a(this)}static get watchers(){return{value:["handleValueChanged"]}}};l.style=":host{display:block}#color-picker-toggle-button{--calcite-ui-brand:var(--calcite-ui-border-input);margin-left:-1px}.swatch{background-color:var(--swatch-color, transparent);width:1.25rem}.swatch.no-color{background-image:linear-gradient(45deg, #ededed 25%, #a6a6a6 25%, #a6a6a6 50%, #ededed 50%, #ededed 75%, #a6a6a6 75%, #a6a6a6 100%);background-size:15px 15px;outline:solid 1px #a6a6a6}";export{l as arcgis_hub_input_color}