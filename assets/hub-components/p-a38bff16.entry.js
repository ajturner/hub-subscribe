import{r as s,c as t,h as i,H as o,a as e}from"./p-d4ba4c14.js";import{i as a}from"./p-be5c5009.js";import{b as p}from"./p-fd260f2d.js";import{d as r}from"./p-8cf4bd83.js";import{u as c}from"./p-fbd5dcee.js";import{i as n}from"./p-6f931af6.js";import{D as d}from"./p-56b73d71.js";import"./p-dfe5a97d.js";import"./p-c94c130f.js";import"./p-8ccaf06d.js";import"./p-9b205605.js";import"./p-b728aff4.js";import"./p-796574a4.js";import"./p-c8e0e01f.js";import"./p-dcdf7b57.js";import"./p-637ea136.js";import"./p-59fd2498.js";import"./p-97274a47.js";import"./p-3904125b.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-a0deb8c6.js";import"./p-30a7cbb2.js";import"./p-90dc0f6f.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-6dcae6cd.js";import"./p-2acb70a6.js";import"./p-7202c430.js";import"./p-75d6da59.js";import"./p-10274eb9.js";import"./p-ad325ed1.js";import"./p-69555c48.js";import"./p-cea8413b.js";import"./p-d763eacf.js";import"./p-e43616ff.js";import"./p-992b9d10.js";import"./p-895b662f.js";import"./p-52612356.js";import"./p-af59e67b.js";import"./p-b295a5ae.js";import"./p-8e7f4c22.js";const l=class{constructor(i){s(this,i),this.hubTelemetry=t(this,"hubTelemetry",7),this.arcgisHubDiscussionsOptionsModalClosed=t(this,"arcgisHubDiscussionsOptionsModalClosed",7),this.arcgisHubDiscussionsOptionsModalUpdated=t(this,"arcgisHubDiscussionsOptionsModalUpdated",7),this.subject=void 0,this.context=void 0,this.open=void 0,this.saving=void 0,this.error=void 0,this.canDiscuss=!1,p(this,"handleCloseModal","handleModalClosed","handleSave","handleNoticeClosed","handleOptionsChanged")}async componentWillLoad(){this.intl=await a.loadIntlForComponent(this.element),this.updateCanDiscuss()}updateCanDiscuss(){this.canDiscuss=n(this.subject)}handleModalClosed(){this.hubTelemetry.emit(r.dictionary.category.interaction.action.close.label.modal.details.discussionOptions),this.arcgisHubDiscussionsOptionsModalClosed.emit()}handleOptionsChanged(s){this.canDiscuss=s.detail}handleCloseModal(){this.open=!1}get isGroup(){return void 0!==this.subject.isInvitationOnly}async handleSave(){const{subject:s,context:t,optionsElement:i,isGroup:o}=this,{value:e}=i,a=r.dictionary.category[o?"groups":"content"].action.update.label.settings.details[e?"allowDiscussions":"blockDiscussions"];this.saving=!0,this.error=null;try{const o=await c(Object.assign({subject:s,discussable:i.value},t.requestOptions));this.hubTelemetry.emit(Object.assign(Object.assign({},a),{response:r.constants.response.SUCCESS})),this.subject=o,this.arcgisHubDiscussionsOptionsModalUpdated.emit(o)}catch(s){this.error=s,this.hubTelemetry.emit(Object.assign(Object.assign({},a),{response:r.constants.response.FAILURE}))}finally{this.saving=!1}}handleNoticeClosed(){this.error=null}render(){const{intl:s,saving:t,open:e,error:a,isGroup:p,canDiscuss:r}=this;return i(o,null,i("arcgis-wormhole",null,i("calcite-modal",{closeButtonDisabled:t,"data-element":"discussions-options-modal",onCalciteModalClose:this.handleModalClosed,open:e,outsideCloseDisabled:!0},i("header",{slot:"header"},s.t("header")),i("arcgis-hub-discussions-options",{disabled:t,layout:"horizontal",onArcgisHubDiscussionsOptionsChange:this.handleOptionsChanged,ref:s=>{this.optionsElement=s},slot:"content",value:r,variant:p?d.GROUP:d.CONTENT}),a&&i("calcite-notice",{closable:!0,kind:"danger",onCalciteNoticeClose:this.handleNoticeClosed,open:!0,slot:"content"},i("header",{slot:"title"},this.intl.t("error.title")),i("p",{slot:"message"},this.intl.t("error.message"))),i("calcite-button",{appearance:"outline",disabled:t,onClick:this.handleCloseModal,slot:"secondary",type:"button"},s.t("secondary")),i("calcite-button",{loading:t,onClick:this.handleSave,slot:"primary",type:"submit"},s.t(t?"pending":"primary")))))}static get assetsDirs(){return["locales"]}get element(){return e(this)}static get watchers(){return{open:["updateCanDiscuss"],subject:["updateCanDiscuss"]}}};l.style=".sc-arcgis-hub-discussions-options-modal-h{display:block}calcite-notice.sc-arcgis-hub-discussions-options-modal{margin-top:0.5rem}p.sc-arcgis-hub-discussions-options-modal{margin:0px}";export{l as arcgis_hub_discussions_options_modal}