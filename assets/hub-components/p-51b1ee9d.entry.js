import{r as t,c as e,h as i,F as s,H as o,a as r}from"./p-d4ba4c14.js";import{i as a}from"./p-be5c5009.js";import{g as n}from"./p-81a9bee2.js";import{b as c}from"./p-0927367d.js";import{g as l}from"./p-77801e48.js";import{d as h}from"./p-8cf4bd83.js";import{g as d}from"./p-75d6da59.js";import{c as p}from"./p-f845584b.js";import{b as u}from"./p-b728aff4.js";import{g as m}from"./p-7202c430.js";import"./p-859c5360.js";import"./p-dfe5a97d.js";import"./p-a0deb8c6.js";import"./p-7b082f5d.js";import"./p-8dbea197.js";import"./p-b295a5ae.js";import"./p-796574a4.js";const b=class{constructor(i){t(this,i),this.arcgisHubLayoutEditorHeaderShare=e(this,"arcgisHubLayoutEditorHeaderShare",7),this.arcgisHubLayoutEditorHeaderPreviewPublished=e(this,"arcgisHubLayoutEditorHeaderPreviewPublished",7),this.arcgisHubLayoutEditorHeaderPreviewDraft=e(this,"arcgisHubLayoutEditorHeaderPreviewDraft",7),this.arcgisHubLayoutEditorHeaderPublish=e(this,"arcgisHubLayoutEditorHeaderPublish",7),this.arcgisHubLayoutEditorHeaderSave=e(this,"arcgisHubLayoutEditorHeaderSave",7),this.arcgisHubLayoutEditorHeaderClone=e(this,"arcgisHubLayoutEditorHeaderClone",7),this.arcgisHubLayoutEditorHeaderDelete=e(this,"arcgisHubLayoutEditorHeaderDelete",7),this.arcgisHubLayoutEditorHeaderSaveAsTemplate=e(this,"arcgisHubLayoutEditorHeaderSaveAsTemplate",7),this.hubTelemetry=e(this,"hubTelemetry",7),this.handleWorkspaceItemClick=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.navigation.action.view.label.content.details.workspace})},this.handleSiteMenuItemClick=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.interaction.action.open.label.popover.details.site})},this.handleAccessChange=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.interaction.action.open.label.sidePanel.details.sharing}),this.arcgisHubLayoutEditorHeaderShare.emit(this.entity)},this.handleViewButtonClick=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.interaction.action.open.label.menu.details.view})},this.handlePreviewPublished=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.navigation.action.view.label.content.details.publishedDraft}),this.arcgisHubLayoutEditorHeaderPreviewPublished.emit(this.entity)},this.handlePreviewDraft=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.navigation.action.view.label.content.details.previewDraft}),this.arcgisHubLayoutEditorHeaderPreviewDraft.emit(this.entity)},this.handlePublish=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.content.action.update.label.layout.details.publish}),this.arcgisHubLayoutEditorHeaderPublish.emit(this.entity)},this.handleSave=()=>{this.arcgisHubLayoutEditorHeaderSave.emit(this.entity)},this.handleOverflowButtonClick=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.interaction.action.open.label.menu.details.options})},this.handleClone=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.content.action.create.label.site.details.clone}),this.arcgisHubLayoutEditorHeaderClone.emit(this.entity)},this.handleDelete=()=>{const t=d(this.entity);this.hubTelemetry.emit({telemetry:h.dictionary.category.content.action.delete.label[t]}),this.arcgisHubLayoutEditorHeaderDelete.emit(this.entity)},this.handleSaveAsTemplate=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.content.action.create.label.template.details.site}),this.arcgisHubLayoutEditorHeaderSaveAsTemplate.emit(this.entity)},this.handleEditLayout=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.navigation.action.view.label.content.details.layoutEditor})},this.handleViewSite=()=>{this.hubTelemetry.emit({telemetry:h.dictionary.category.navigation.action.view.label.content.details.site})},this.entity=void 0,this.site=void 0,this.saveButtonDisabled=void 0,this.isDirty=void 0,this.isPublishing=void 0,this.isSaving=void 0,this.showClone=void 0,this.showDelete=void 0}get context(){return n()}get type(){return d(this.entity)}get isSite(){return"site"===this.type}get entityControls(){switch(this.type){case"template":return["save"];default:return["share","view","publish","save","more"]}}async componentWillLoad(){this.intl=await a.loadIntlForComponent(this.element)}get sharingButtonIcon(){return l(this.entity.access)}get saveButtonIcon(){return this.isDirty?"exclamation-mark-circle":void 0}renderSitePopover(){const{context:t,isSite:e,site:s}=this;if(!e&&s){const e=l(s.access),o=p("hub:site:edit",t,s).access;return i("calcite-popover",{"auto-close":!0,label:s.name,placement:"bottom","reference-element":"popover-trigger"},i("p",null,i("div",{class:"site-title"},s.name),i("div",null,i("calcite-icon",{icon:e,scale:"s"}),this.intl.t(`popover.access.${s.access}`)),i("div",null,i("calcite-icon",{icon:"clock",scale:"s"}),this.intl.t("popover.lastUpdated",{updated:this.intl.formatDate(s.updatedDate)})),o&&i("calcite-button",{class:"edit-site-btn",href:"/edit",onClick:this.handleEditLayout,round:!0,width:"full"},this.intl.t("popover.editLayout")),i("calcite-button",{appearance:"outline",href:"/",kind:"neutral",onClick:this.handleViewSite,round:!0,width:"full"},this.intl.t("popover.viewSite"))))}}renderMenus(){const{entity:t,isSite:e,site:o}=this,r=`manage${u(this.type)}`,a=m(t.type,t.id),n=e||!!o;return i(s,null,i("calcite-menu",{slot:"content-start"},i("calcite-menu-item",{href:a,"icon-start":"chevron-left",onClick:this.handleWorkspaceItemClick,text:this.intl.t(r),"text-enabled":!0})),i("calcite-menu",{slot:"content-center"},this.renderSitePopover(),n&&i("calcite-menu-item",{active:e,breadcrumb:!this.isSite,class:e?"non-interactive":"","icon-start":"browser",id:"popover-trigger",onClick:this.handleSiteMenuItemClick,tabindex:e?"-1":"0",text:null==o?void 0:o.name,"text-enabled":!0}),!e&&i("calcite-menu-item",{active:!e,class:"non-interactive","icon-start":"maximize",tabindex:"-1",text:t.name,"text-enabled":!0})))}renderControls(){const{entity:t}=this,e=`delete${u(this.type)}`,s=c(this.context,t);return i("div",{class:"controls-container",slot:"content-end"},this.entityControls.includes("share")&&i("calcite-button",{appearance:"transparent","icon-start":this.sharingButtonIcon,kind:"neutral",label:this.intl.t("sharingLabel"),onClick:this.handleAccessChange,round:!0}),this.entityControls.includes("view")&&i("calcite-dropdown",null,i("calcite-button",{appearance:"outline","icon-end":"chevron-down",kind:"neutral",onClick:this.handleViewButtonClick,round:!0,slot:"trigger"},this.intl.t("viewLabel")),i("calcite-dropdown-group",{selectionMode:"none"},i("calcite-dropdown-item",{onClick:this.handlePreviewPublished},this.intl.t("viewPublishedLabel")),i("calcite-dropdown-item",{onClick:this.handlePreviewDraft},this.intl.t("viewUnpublishedLabel")))),this.entityControls.includes("publish")&&i("calcite-button",{appearance:"outline",kind:"neutral",loading:this.isPublishing,onClick:this.handlePublish,round:!0},this.intl.t("publishLabel")),this.entityControls.includes("save")&&i("calcite-button",{appearance:"solid",disabled:this.saveButtonDisabled,"icon-start":this.saveButtonIcon,kind:"brand",loading:this.isSaving,onClick:this.handleSave,round:!0},this.intl.t("saveLabel")),this.entityControls.includes("more")&&i("calcite-dropdown",null,i("calcite-button",{appearance:"transparent","icon-start":"ellipsis",kind:"neutral",label:this.intl.t("moreOptionsLabel"),onClick:this.handleOverflowButtonClick,round:!0,slot:"trigger"}),i("calcite-dropdown-group",{selectionMode:"none"},this.showClone&&i("calcite-dropdown-item",{onClick:this.handleClone},this.intl.t("cloneLayoutLabel")),i("calcite-dropdown-item",{href:s},this.intl.t("editInAgoLabel")),this.showDelete&&i("calcite-dropdown-item",{onClick:this.handleDelete},this.intl.t(e)),this.isSite&&i("calcite-dropdown-item",{onClick:this.handleSaveAsTemplate},this.intl.t("saveAsTemplateLabel")))))}render(){if(this.entity)return i(o,{"data-element":"layout-editor-header"},i("calcite-navigation",null,this.renderMenus(),this.renderControls(),i("arcgis-hub-user-profile",{slot:"user"})))}static get assetsDirs(){return["locales"]}get element(){return r(this)}};b.style=':host{display:block}calcite-navigation{--calcite-navigation-background:var(--calcite-ui-foreground-2);--foreground-1:var(--calcite-ui-foreground-1)}calcite-menu-item{--calcite-ui-foreground-1:var(--calcite-navigation-background);--calcite-ui-foreground-2:var(--foreground-1)}calcite-popover{background-color:var(--calcite-ui-foreground-2)}calcite-popover p{margin:0px;display:flex;max-width:20rem;flex-direction:column;gap:0.5rem;padding:0.75rem}calcite-popover .site-title{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-bold)}calcite-popover .site-title,calcite-popover .edit-site-btn{margin-bottom:0.25rem}calcite-popover p>div{display:flex;align-items:center;gap:0.5rem}.non-interactive{pointer-events:none}.controls-container{display:none;gap:1rem;margin-inline-end:1rem}[slot="content-center"]{display:none}[slot="user"]{display:flex;align-items:center;margin-inline-end:1rem}@media (min-width: 768px){[slot="content-center"],.controls-container{display:flex}}';export{b as arcgis_hub_layout_editor_header}