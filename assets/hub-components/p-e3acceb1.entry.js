import{r as t,c as s,h as i,H as e}from"./p-d4ba4c14.js";import{b as r}from"./p-fd260f2d.js";import{g as a}from"./p-f67e01a5.js";import{W as o}from"./p-d8c815da.js";import{g as p,c}from"./p-81a9bee2.js";import{f as h}from"./p-e65c0b02.js";import{g as n}from"./p-75d6da59.js";import{c as d}from"./p-f845584b.js";import"./p-859c5360.js";import"./p-ac8be5fd.js";import"./p-85d6867e.js";import"./p-a0deb8c6.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-796574a4.js";import"./p-dcdf7b57.js";import"./p-6dcae6cd.js";import"./p-637ea136.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-2acb70a6.js";import"./p-6f931af6.js";import"./p-56b73d71.js";import"./p-3904125b.js";import"./p-b728aff4.js";import"./p-52612356.js";import"./p-af59e67b.js";import"./p-b295a5ae.js";import"./p-cea8413b.js";import"./p-d763eacf.js";import"./p-ad325ed1.js";import"./p-8e7f4c22.js";import"./p-69555c48.js";import"./p-8dbea197.js";import"./p-7202c430.js";import"./p-90dc0f6f.js";import"./p-59fd2498.js";import"./p-16a95e5b.js";import"./p-e43616ff.js";import"./p-ca048216.js";import"./p-4a14259a.js";import"./p-235bb6ee.js";import"./p-783242bc.js";import"./p-903ef8af.js";import"./p-c836a9b6.js";import"./p-58cf73b6.js";import"./p-7b082f5d.js";import"./p-9646abb2.js";import"./p-bded806b.js";import"./p-87582fe0.js";import"./p-8ccaf06d.js";import"./p-9b205605.js";import"./p-c8e0e01f.js";import"./p-97274a47.js";import"./p-30a7cbb2.js";import"./p-10274eb9.js";import"./p-dafb2329.js";import"./p-992b9d10.js";import"./p-895b662f.js";const m=class{constructor(i){t(this,i),this.arcgisHubWorkspaceEntityChange=s(this,"arcgisHubWorkspaceEntityChange",7),this.arcgisHubWorkspaceAccessDenied=s(this,"arcgisHubWorkspaceAccessDenied",7),this.arcgisHubWorkspaceSignOut=s(this,"arcgisHubWorkspaceSignOut",7),this._context=p(),this.entity=void 0,this.identifier=void 0,this.pane="overview",this.siteName=void 0,this.type=void 0,this.isLoading=void 0,this._entity=void 0,r(this,"handleWorkspaceLinkClicked")}connectedCallback(){c(this)}disconnectedCallback(){this.disconnectContext()}handleWorkspaceLinkClicked(t){t.detail.pane&&(this.pane=t.detail.pane)}handleEntitySaved(t){const{entity:s,isSuccess:i}=t.detail;this.arcgisHubWorkspaceEntityChange.emit({isDirty:!i,entity:s}),i&&this.identifier&&this.fetchEntity()}onSignout(){this.arcgisHubWorkspaceSignOut.emit()}async handleFetchingPropsChanged(){this._entity=this.entity,this._context&&!this.entity&&this.identifier&&this.fetchEntity({showLoading:!0})}async fetchEntity(t={}){t.showLoading&&(this.isLoading=!0);try{h(this.type,this.identifier,this._context).then((t=>{this._entity=Object.assign(t)}))}catch(t){console.error(`Error fetching entity ${this.identifier}: ${t}`)}finally{t.showLoading&&(this.isLoading=!1)}}handleEntityChange(){this._entity=this.entity}checkEntityAccess(){if(this._context&&this._entity){const t=n(this._entity),s=d(`hub:${t}:manage`,this._context,this._entity);s.access||this.arcgisHubWorkspaceAccessDenied.emit(s)}}async componentWillLoad(){this.handleFetchingPropsChanged()}get _type(){return this.type||n(this.entity)}get defaultPaneComponents(){return{overview:"arcgis-hub-entity-overview",details:"arcgis-hub-entity-details",settings:"arcgis-hub-entity-settings"}}get paneComponent(){var t;return o.includes(this.pane)?(null===(t=a(this._type).find((t=>t.pane===this.pane)))||void 0===t?void 0:t.component)||this.defaultPaneComponents[this.pane]:"arcgis-hub-workspace-missing-pane"}renderHeader(){var t;return i("div",{slot:"header"},i("arcgis-hub-workspace-top-navigation",{hubHomeUrl:null===(t=this._context)||void 0===t?void 0:t.hubHomeUrl,siteName:this.siteName}),i("arcgis-hub-workspace-header",{class:"workspace__header",context:this._context,entity:this._entity}))}renderNavigation(){return i("div",{class:"workspace__navigation",slot:"panel-start"},i("slot",{name:"workspace-navigation"},i("arcgis-hub-workspace-navigation",{activePane:this.pane,context:this._context,entity:this._entity})))}renderPane(){return i("div",{class:"workspace__pane"},i(this.paneComponent,{context:this._context,entity:this._entity,pane:this.pane}))}renderFooter(){return i("arcgis-hub-product-footer",{slot:"footer"})}render(){return this.isLoading||!this._entity?i("arcgis-skeleton-loader",{active:!0,class:"workspace__loader",rows:3,"show-heading":"true"}):i(e,{"data-element":"workspace",unthemed:!0},i("calcite-shell",null,this.renderHeader(),this.renderNavigation(),this.renderPane(),this.renderFooter()))}static get watchers(){return{identifier:["handleFetchingPropsChanged"],_context:["handleFetchingPropsChanged","checkEntityAccess"],entity:["handleEntityChange"],_entity:["checkEntityAccess"]}}};m.style=".sc-arcgis-hub-workspace-h{position:relative;display:block;height:100vh}.workspace__navigation.sc-arcgis-hub-workspace{border-right:1px solid var(--calcite-ui-border-1);padding:0px}.workspace__pane.sc-arcgis-hub-workspace{height:100%;background-color:var(--calcite-ui-background)}";export{m as arcgis_hub_workspace}