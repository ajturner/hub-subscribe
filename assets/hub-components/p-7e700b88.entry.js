import{r as e,c as t,h as i,H as n,a}from"./p-d4ba4c14.js";import{i as l}from"./p-be5c5009.js";import{b as r}from"./p-fd260f2d.js";import{d as s}from"./p-8cf4bd83.js";import"./p-dfe5a97d.js";const c={nameOrTitle:{icon:"title",text:"nameTitle"},description:{icon:"string",text:"description"},typeOrCategory:{icon:"label",text:"category"},countOrAmount:{icon:"number",text:"amount"},percentageOrRatio:{icon:"percent",text:"percentage"},measurement:{icon:"measure",text:"measurement"},currency:{icon:"credits",text:"currency"},uniqueIdentifier:{icon:"fingerprint",text:"identifier"},phoneNumber:{icon:"phone",text:"phone"},emailAddress:{icon:"email-address",text:"email"},orderedOrRanked:{icon:"switch",text:"ordered"},binary:{icon:"toggle",text:"binary"},locationOrPlaceName:{icon:"pin",text:"placename"},coordinate:{icon:"point",text:"coordinate"},dateAndTime:{icon:"calendar",text:"datetime"},esriFieldTypeSmallInteger:{icon:"number",text:"shortInt"},esriFieldTypeInteger:{icon:"number",text:"longInt"},esriFieldTypeSingle:{icon:"number",text:"singleNum"},esriFieldTypeDouble:{icon:"number",text:"doubleNum"},esriFieldTypeString:{icon:"string",text:"charString"},esriFieldTypeDate:{icon:"calendar",text:"date"},esriFieldTypeOID:{icon:"fingerprint",text:"idInteger"},esriFieldTypeGeometry:{icon:"vertex-check",text:"geometry"},esriFieldTypeBlob:{icon:"file-text",text:"blobObject"},esriFieldTypeRaster:{icon:"string",text:"raster"},esriFieldTypeGUID:{icon:"fingerprint",text:"guid"},esriFieldTypeGlobalID:{icon:"fingerprint",text:"esriId"},esriFieldTypeXML:{icon:"string",text:"xml"}};var o;!function(e){e.Chart="Chart",e.Table="Table"}(o||(o={}));const d=class{constructor(i){e(this,i),this.hubTelemetry=t(this,"hubTelemetry",7),this.arcgisHubAttributesListAccordionChange=t(this,"arcgisHubAttributesListAccordionChange",7),this.fieldTabStates={},this.defaultFieldTab=o.Chart,this.content=void 0,this.fields=void 0,this.maxFields=10,this.parsedFields=[],r(this,"handleLearnMoreClick","handleLoadMoreClick","handleTabChange","renderChartSlot","renderTableSlot","renderAccordionItem")}handleContentUpdated(e){this.parseFields(e,this.fields)}handleFieldsUpdated(e){this.parseFields(this.content,e)}async componentWillLoad(){this.parseFields(this.content,this.fields),this.intl=await l.loadIntlForComponent(this.element)}handleLearnMoreClick(e){e.preventDefault();const{href:t}=e.target;this.hubTelemetry.emit(Object.assign(Object.assign({},s.dictionary.category.navigation.action.external.label.webHelp),{details:t})),setTimeout((()=>{globalThis.location.href=t}),100)}handleLoadMoreClick(e){e.preventDefault(),this.hubTelemetry.emit(s.dictionary.category.interaction.action.search.label.loadMore.details.attributes),this.maxFields=this.parsedFields.length}handleAccordionChange(e){const{expanded:t,dataset:{fieldName:i}}=e.detail.requestedAccordionItem,n=t?s.dictionary.category.interaction.action.close.label.accordion.details.attribute:s.dictionary.category.interaction.action.open.label.accordion.details.attribute;this.arcgisHubAttributesListAccordionChange.emit({fieldName:i,expanded:!t}),this.hubTelemetry.emit(n)}parseFields(e,t){if(e&&t){const i=e=>{if(e){const t=e.trim();return"/"===t?"":t}};this.parsedFields=t.map((t=>{const n=e.layer.fields.find((({name:e})=>e===t.name));let a;try{const e=JSON.parse(n.description);a={value:i(e.value),fieldValueType:i(e.fieldValueType)}}catch(e){a=null}return{alias:i(t.alias),type:t.type,description:a,name:t.name,chartable:t.chartable}}))}else this.parsedFields=[]}handleTabChange(e){const t=e.target,i=t.tab,n=t.parentElement.dataset.fieldName,{[n]:a=this.defaultFieldTab}=this.fieldTabStates;if(a!==i){this.fieldTabStates=Object.assign(Object.assign({},this.fieldTabStates),{[n]:i});const{telemetry:e}=this.tabs.find((({type:e})=>e===i));this.hubTelemetry.emit(e)}}get fieldsToRender(){const{maxFields:e,parsedFields:t}=this;return t.reduce(((t,i,n)=>n<e?[...t,i]:t),[])}get shouldRenderLoadMore(){return this.parsedFields.length>this.maxFields}get tabs(){return[{type:o.Chart,title:"firstTab",telemetry:s.dictionary.category.navigation.action.onPage.label.chart,renderSlot:this.renderChartSlot},{type:o.Table,title:"secTab",telemetry:s.dictionary.category.navigation.action.onPage.label.table,renderSlot:this.renderTableSlot}]}renderHeader(){return i("div",{class:"header"},i("header",null,this.intl.t("header")),i("calcite-link",{href:"https://doc.arcgis.com/en/hub/content/explore-content.htm","icon-end":"launch",onClick:this.handleLearnMoreClick},this.intl.t("learn")))}renderAccordion(){return i("calcite-accordion",{appearance:"transparent",scale:"l"},this.fieldsToRender.map(this.renderAccordionItem))}renderAccordionItem(e){var t,n,a,l;return i("calcite-accordion-item",{"data-field-name":e.name,description:null===(t=e.description)||void 0===t?void 0:t.value,heading:e.alias||e.name,"icon-end":e.chartable&&"graph-bar","icon-start":c[(null===(n=e.description)||void 0===n?void 0:n.fieldValueType)||e.type].icon,key:e.name},Boolean(e.alias)&&e.alias!==e.name&&i("calcite-label",null,i("span",null,this.intl.t("aliasLabel")),i("div",null,e.alias)),i("calcite-label",null,i("span",null,this.intl.t("nameLabel")),i("div",null,e.name)),Boolean(null===(a=e.description)||void 0===a?void 0:a.value)&&i("calcite-label",null,i("span",null,this.intl.t("descriptionLabel")),i("div",null,e.description.value)),Boolean(null===(l=e.description)||void 0===l?void 0:l.fieldValueType)&&i("calcite-label",null,i("span",null,this.intl.t("fieldTypeLabel")),i("div",null,this.intl.t(c[e.description.fieldValueType].text))),i("calcite-label",null,i("span",null,this.intl.t("typeLabel")),i("div",null,this.intl.t(c[e.type].text))),e.chartable&&this.renderTabs(e))}renderTabs(e){return i("calcite-tabs",null,i("calcite-tab-nav",{"data-field-name":e.name,slot:"title-group"},this.tabs.map((({type:e,title:t})=>i("calcite-tab-title",{key:e,onCalciteTabsActivate:this.handleTabChange,tab:e},this.intl.t(t))))),this.tabs.map((({type:t,renderSlot:n})=>i("calcite-tab",{key:t,selected:t===this.defaultFieldTab,tab:t},n(e)))))}renderChartSlot(e){return i("slot",{name:`${e.name}-chart`})}renderTableSlot(e){return i("slot",{name:`${e.name}-table`})}render(){return i(n,{"data-element":"attributes-list"},this.renderHeader(),this.renderAccordion(),this.shouldRenderLoadMore&&i("calcite-link",{"icon-end":"chevron-down",onClick:this.handleLoadMoreClick},this.intl.t("loadMore")))}static get assetsDirs(){return["locales"]}get element(){return a(this)}static get watchers(){return{content:["handleContentUpdated"],fields:["handleFieldsUpdated"]}}};d.style=":host {\n  display: block;\n  container-type: inline-size\n}\n\n.header {\n  margin-bottom: 1rem;\n  display: flex;\n  justify-content: space-between\n}\n\n@container (width < 500px) {\n  .header {\n    flex-direction: column\n  }\n}\n\n.header header {\n  font-size: var(--calcite-font-size-1);\n  line-height: 1.5rem;\n  font-weight: var(--calcite-font-weight-bold)\n}\n\ncalcite-label {\n  margin-top: 0.25rem;\n  display: block\n}\n\ncalcite-label:first-child {\n  margin-top: 0.75rem\n}\n\ncalcite-label span {\n  font-weight: var(--calcite-font-weight-bold)\n}\n\ncalcite-label div {\n  line-height: 1.375\n}\n\ncalcite-tabs {\n  margin-top: 0.25rem\n}\n\ncalcite-accordion + calcite-link {\n  margin-top: 0.5rem;\n  display: inline-block\n}";export{d as arcgis_hub_attributes_list}