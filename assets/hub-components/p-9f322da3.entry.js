import{r as t,c as s,h as e,F as i,H as n,a}from"./p-d4ba4c14.js";import{u as o,g as r}from"./p-fbd5dcee.js";import{b as d}from"./p-fd260f2d.js";import{i as l}from"./p-be5c5009.js";import{d as c}from"./p-8cf4bd83.js";import{R as h}from"./p-2accb2bf.js";import{D as u}from"./p-3bf8d293.js";import{A as p,c as b,f as m,a as g,b as y,d as v}from"./p-1ec95626.js";import{f,a as w}from"./p-953effcc.js";import{m as I}from"./p-1b73120f.js";import{D as j,P as x,d as F}from"./p-56b73d71.js";import{c as O}from"./p-57e484a6.js";import{i as C}from"./p-6f931af6.js";import{C as T}from"./p-1fde1b24.js";import{f as k}from"./p-4db6fd24.js";import{s as D}from"./p-57f04fe1.js";import{b as R}from"./p-783242bc.js";import"./p-c94c130f.js";import"./p-8ccaf06d.js";import"./p-9b205605.js";import"./p-b728aff4.js";import"./p-796574a4.js";import"./p-c8e0e01f.js";import"./p-dcdf7b57.js";import"./p-637ea136.js";import"./p-59fd2498.js";import"./p-97274a47.js";import"./p-3904125b.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-a0deb8c6.js";import"./p-30a7cbb2.js";import"./p-90dc0f6f.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-6dcae6cd.js";import"./p-2acb70a6.js";import"./p-7202c430.js";import"./p-75d6da59.js";import"./p-10274eb9.js";import"./p-ad325ed1.js";import"./p-69555c48.js";import"./p-cea8413b.js";import"./p-d763eacf.js";import"./p-e43616ff.js";import"./p-992b9d10.js";import"./p-895b662f.js";import"./p-dfe5a97d.js";import"./p-8e7f4c22.js";import"./p-4a14259a.js";import"./p-adee2925.js";import"./p-df1dc3df.js";import"./p-52612356.js";import"./p-af59e67b.js";import"./p-b295a5ae.js";import"./p-9e418183.js";import"./p-5b420841.js";import"./p-3363f483.js";import"./p-87582fe0.js";import"./p-903ef8af.js";var P=function(t,s,e,i){var n,a=arguments.length,o=a<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,e,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(o=(a<3?n(o):a>3?n(s,e,o):n(s,e))||o);return a>3&&o&&Object.defineProperty(s,e,o),o};const H=class{constructor(e){t(this,e),this.arcgisHubPostEditorReady=s(this,"arcgisHubPostEditorReady",7),this.arcgisHubGeometryGoTo=s(this,"arcgisHubGeometryGoTo",7),this.arcgisHubDiscussionsFeature=s(this,"arcgisHubDiscussionsFeature",7),this.arcgisHubDiscussionsFeatureDeleted=s(this,"arcgisHubDiscussionsFeatureDeleted",7),this.arcgisHubGeometryFeatureSelect=s(this,"arcgisHubGeometryFeatureSelect",7),this.arcgisHubGeometryFeatureHover=s(this,"arcgisHubGeometryFeatureHover",7),this.arcgisHubGeometryDrawCreate=s(this,"arcgisHubGeometryDrawCreate",7),this.arcgisHubGeometryDrawTypeSelect=s(this,"arcgisHubGeometryDrawTypeSelect",7),this.arcgisHubGeometryDrawEdit=s(this,"arcgisHubGeometryDrawEdit",7),this.arcgisHubGeometryDrawEditCancel=s(this,"arcgisHubGeometryDrawEditCancel",7),this.arcgisHubGeometryDrawReset=s(this,"arcgisHubGeometryDrawReset",7),this.arcgisHubGeometrySelect=s(this,"arcgisHubGeometrySelect",7),this.arcgisHubGeometryDeselect=s(this,"arcgisHubGeometryDeselect",7),this.arcgisHubDiscussionsViewThread=s(this,"arcgisHubDiscussionsViewThread",7),this.arcgisHubDiscussionsDismiss=s(this,"arcgisHubDiscussionsDismiss",7),this.arcgisHubDiscussionsClose=s(this,"arcgisHubDiscussionsClose",7),this.arcgisHubFeatureRemove=s(this,"arcgisHubFeatureRemove",7),this.arcgisHubGeometryClearAll=s(this,"arcgisHubGeometryClearAll",7),this.hubTelemetry=s(this,"hubTelemetry",7),this.context=void 0,this.discussion=void 0,this.parentId=void 0,this.postId=void 0,this.channelId=void 0,this.locationId=void 0,this.unsavedFeatures=[],this.unsavedRelatedFeatures=[],this.unsavedExistingFeatures=[],this.hasMap=void 0,this.isHub=void 0,this.dismissible=void 0,this.enableGoTo=void 0,this.disableNavigation=void 0,this.entityId=void 0,this.entityType=void 0,this.entity=void 0,this.threadScrollTarget=void 0,this.postListProps=void 0,this.threadProps=void 0,this.listScrollTarget=void 0,this._loading=!0,this.displayFieldValid=void 0,this.displayFieldValue=void 0,this.displayFieldKey=void 0,this.error=null,this.optionsError=null,this.optionsSaving=!1,this.showPostEditor=!1,this.isMobile=void 0,this.showOptions=!1,this.intl=void 0,d(this,"handleCheckStatus","handleBackToList","handleBackToThread","handleGeometryGoTo","handleNewPost","renderLoading","renderAddOrCreatePostButton","renderPostEditor","renderThread","renderPostList","renderError","handleDiscussionOptionsClick","handleOptionsBack","checkIsMobile","handleSaveOptions","handleResetOptionsError","handlePostListUpdated","renderRequiresAuth","handleThreadReady","handlePostListReady")}async componentWillLoad(){this.initialize()}componentDidLoad(){this.observe()}connectedCallback(){this.observe()}disconnectedCallback(){this.disconnect()}async loadDependencies(){return this._loading=!0,this.fetchDependencies().then((t=>{Object.assign(this,t)})).catch((t=>{this.error=t})).finally((()=>{this._loading=!1}))}async initialize(){this.loadTranslations(),this.context&&this.loadDependencies()}async loadTranslations(){this.intl=await l.loadIntlForComponent(this.element)}async fetchDependencies(){return this._fetchDependencies()}async _fetchDependencies(){const{isHub:t,context:s,discussion:e,entityId:i,entityType:n,entity:a,locationId:o}=this,[r,d]=await Promise.all([f({isHub:t},s.hubRequestOptions),w({discussion:e,entityId:i,entityType:n,entity:a,locationId:o},s.hubRequestOptions)]);return Object.assign(Object.assign({},r),d)}handleContextChanged(t){(null==t?void 0:t.currentUser)?this.loadDependencies():this.resetState()}resetState(){this.error=null,this._loading=!1,this.threadScrollTarget=null,this.listScrollTarget=null,this.optionsError=null,this.optionsSaving=!1,this.showPostEditor=!1,this.showOptions=!1,this.entity=void 0,this.displayFieldValid=void 0,this.displayFieldValue=void 0,this.displayFieldKey=void 0,this.postListProps=null,this.threadProps=null}async handleBackToList(){var t;const{thread:s}=this;this.hubTelemetry.emit(Object.assign(Object.assign({},c.dictionary.category.interaction.action.close.label.thread),{postId:s.postId,parentId:s.parentId,channelId:s.channelId,channelAccess:null===(t=s.channel)||void 0===t?void 0:t.access})),this.threadScrollTarget=null,this.threadProps=null,this.channelId=null,this.parentId=null,this.postId=null,this.arcgisHubDiscussionsViewThread.emit({parentId:null,channelId:null})}observe(){h.addHandler(window.document.body,this.checkIsMobile)}disconnect(){h.removeHandler(window.document.body,this.checkIsMobile)}scrollToTarget(t){this.element.scrollTo({behavior:"smooth",left:t.offsetLeft,top:t.offsetTop})}async scrollToThreadTarget(){var t,s;let e;"list"===this.threadScrollTarget?e=await(null===(t=this.thread)||void 0===t?void 0:t.getPostListRef()):"editor"===this.threadScrollTarget&&(e=await(null===(s=this.thread)||void 0===s?void 0:s.getPostEditorRef())),e&&(this.threadScrollTarget=null,this.scrollToTarget(e))}async scrollToListTarget(){var t;const s=await(null===(t=this.postListEl)||void 0===t?void 0:t.getPostRefByPostId(this.listScrollTarget));s&&(this.listScrollTarget=null,this.scrollToTarget(s))}handleNewPost(){this.hubTelemetry.emit(c.dictionary.category.interaction.action.open.label.editor),this.showPostEditor=!0}handlePostListUpdated(t){const s=t.target,{nextStart:e,start:i,total:n,items:a}=s;this.postListProps={nextStart:e,start:i,total:n,items:a}}handlePostEditorReady(t){const{detail:s}=t;t.stopPropagation(),this.arcgisHubPostEditorReady.emit(s)}handlePostCanceled(t){t.stopPropagation(),this.showPostEditor=!1}handlePostCreate(t){this.arcgisHubDiscussionsFeature.emit({post:t.detail,create:!0})}handleThreadReady(){setTimeout((()=>this.scrollToThreadTarget()),500)}handlePostListReady(){setTimeout((()=>this.scrollToListTarget()),500)}async handlePostDeleted(t){var s,e;const{postListProps:i,threadProps:n}=this,a=({id:s})=>s===t.detail.id;(null===(s=this.postListProps)||void 0===s?void 0:s.items.find(a))&&(this.postListProps=Object.assign(Object.assign({},i),{items:i.items.filter((t=>!a(t))),nextStart:i.nextStart>-1?i.nextStart-1:i.nextStart,total:i.total-1})),t.detail.id===(null===(e=null==n?void 0:n.parent)||void 0===e?void 0:e.id)&&(this.threadProps=Object.assign(Object.assign({},n),{parent:null})),this.arcgisHubDiscussionsFeatureDeleted.emit(t.detail)}async handlePostEdited(t){var s,e;const{postListProps:i,threadProps:n}=this,a=({id:s})=>s===t.detail.id;(null===(s=this.postListProps)||void 0===s?void 0:s.items.find(a))&&(this.postListProps=Object.assign(Object.assign({},i),{items:i.items.map((s=>a(s)?t.detail:s))})),t.detail.id===(null===(e=null==n?void 0:n.parent)||void 0===e?void 0:e.id)&&(this.threadProps=Object.assign(Object.assign({},n),{parent:t.detail})),this.arcgisHubDiscussionsFeature.emit({post:t.detail,create:!1})}handlePostSelect(t){const{parentId:s,channelId:e,channel:i,channelGroups:n,parent:a,parentCreator:o,parentCreatorOrg:r,scrollTarget:d,postId:l,post:c,postCreator:h,postCreatorOrg:u}=t.detail;Object.assign(this,{parentId:s,channelId:e,threadScrollTarget:d,listScrollTarget:s,postId:l,showPostEditor:!1,threadProps:s?{channel:i,channelGroups:n,parent:a,parentCreator:o,parentCreatorOrg:r,post:c,postCreator:h,postCreatorOrg:u}:null}),this.arcgisHubDiscussionsViewThread.emit({parentId:s,channelId:e})}handleBackToThread(){const{thread:{postId:t,parentId:s,channelId:e,channel:i}}=this;this.hubTelemetry.emit(Object.assign(Object.assign({},c.dictionary.category.interaction.action.open.label.thread),{postId:t,parentId:s,channelId:e,channelAccess:null==i?void 0:i.access})),this.postId=null,this.arcgisHubDiscussionsViewThread.emit({parentId:s,channelId:e})}handleGeometryGoTo(){const{thread:t}=this;this.arcgisHubGeometryGoTo.emit(null==t?void 0:t.parent)}handleGeometryFeatureSelect(t){t.stopPropagation(),this.arcgisHubGeometryFeatureSelect.emit(t.detail)}handleGeometryFeatureHover(t){t.stopPropagation(),this.arcgisHubGeometryFeatureHover.emit(t.detail)}handleGeometryDrawCreate(t){t.stopPropagation(),this.arcgisHubGeometryDrawCreate.emit(t.detail)}handleGeometryDrawTypeSelect(t){t.stopPropagation(),this.arcgisHubGeometryDrawTypeSelect.emit(t.detail)}handleGeometryDrawEdit(t){t.stopPropagation(),this.arcgisHubGeometryDrawEdit.emit(t.detail)}handleGeometryDrawEditCancel(t){t.stopPropagation(),this.arcgisHubGeometryDrawEditCancel.emit()}handleGeometryDrawReset(t){t.stopPropagation(),this.arcgisHubGeometryDrawReset.emit()}handleGeometrySelect(t){t.stopPropagation(),this.arcgisHubGeometrySelect.emit(t.detail)}handleGeometryDeselect(t){t.stopPropagation(),this.arcgisHubGeometryDeselect.emit()}handleFeatureRemove(t){t.stopPropagation(),this.arcgisHubFeatureRemove.emit(t.detail)}handleGeometryClearAll(t){t.stopPropagation(),this.arcgisHubGeometryClearAll.emit()}handleCalcitePanelDismissedChange(t){t.stopPropagation(),this.arcgisHubDiscussionsDismiss.emit()}handleCalcitePanelDismissChange(t){t.stopPropagation(),this.arcgisHubDiscussionsClose.emit()}captureEmptyListImpression(){this.hubTelemetry.emit(c.dictionary.category.interaction.action.viewed.label.empty)}handleCheckStatus(t){t.preventDefault();const s=t.target;this.hubTelemetry.emit(c.dictionary.category.navigation.action.external.label.hubStatus),setTimeout((()=>this.goToUrl(s.href)),250)}goToUrl(t){window.location.href=t}checkIsMobile(){this._checkIsMobile(globalThis.document.body)}_checkIsMobile(t){this.isMobile=t.clientWidth<768}handleDiscussionOptionsClick(){this.showOptions=!0,this.showPostEditor=!1,this.hubTelemetry.emit(c.dictionary.category.interaction.action.open.label.panel.details.discussionOptions)}handleOptionsBack(){this.showOptions=!1}async handleSaveOptions(){const{entity:t,context:s,optionsElement:e,entityType:i}=this,{value:n}=e,a=c.dictionary.category[i===j.CONTENT?i:"groups"].action.update.label.settings.details[n?"allowDiscussions":"blockDiscussions"];this.optionsSaving=!0,this.optionsError=null;try{const e=await o(Object.assign({subject:t,discussable:n},s.requestOptions));this.hubTelemetry.emit(Object.assign(Object.assign({},a),{response:c.constants.response.SUCCESS})),this.entity=e}catch(t){this.hubTelemetry.emit(Object.assign(Object.assign({},a),{response:c.constants.response.FAILURE})),this.optionsError=t}finally{this.optionsSaving=!1}}handleResetOptionsError(){this.optionsError=null}get loading(){return!this.intl||this._loading}get view(){const{error:t,channelId:s,parentId:e,loading:i,showOptions:n,context:a}=this;let o;return o=(null==a?void 0:a.currentUser)?t?this.renderError:i?this.renderLoading:n?this.renderOptions:s&&e?this.renderThread:this.renderPostList:this.renderRequiresAuth,o}get shouldRenderOptions(){const{context:t,entityType:s,entity:e,dismissible:i}=this;let n=!1;return i||(n=s===j.CONTENT&&O(e.item,t.currentUser)),n}get blockedNotice(){let t;const{entity:s,entityType:e}=this;return s&&!C(s)&&(t="group"===e?p.Group:p.Item),t}renderRequiresAuth(){const{intl:t}=this;if(t)return e("section",{class:"requires-auth"},e("calcite-icon",{icon:"frown",scale:"l"}),e("header",null,t.t("auth.title")),e("p",null,t.t("auth.text")))}renderEmpty(){const{intl:t,deletedDuringSession:s,blockedNotice:i,postListProps:n,showPostEditor:a}=this;if(0===(null==n?void 0:n.total)&&!a)return s||this.captureEmptyListImpression(),e("section",{class:"empty",slot:"empty"},e("calcite-icon",{icon:"speech-bubble",scale:"l"}),e("header",null,t.t("emptyHeading")),e("p",null,t.t("emptyMessage")),e("calcite-button",{disabled:Boolean(i),onClick:this.handleNewPost,round:!0,scale:"l"},t.t("createPost")),i?e("arcgis-hub-discussions-blocked-notice",{variant:p.Item}):e("arcgis-hub-discussions-private-notice",null))}renderOptions(){const{entity:t,entityType:s,optionsSaving:i,intl:n,blockedNotice:a,optionsError:o}=this;return e("calcite-panel",{"data-element":"discussions-options-panel",description:t.title,disabled:i,heading:n.t("options.heading")},e("calcite-action",{class:"discussions-back",onClick:this.handleOptionsBack,scale:"s",slot:"header-actions-start",text:"Back"},e("calcite-icon",{class:"discussions-back-icon",icon:"chevron-left",scale:"s"})),e("div",null,e("arcgis-hub-discussions-options",{layout:"vertical",ref:t=>{this.optionsElement=t},value:!a,variant:s}),e("div",null,e("calcite-button",{loading:i,onClick:this.handleSaveOptions,round:!0,scale:"l",type:"submit"},n.t(i?"options.saving":"options.save"))),o&&e("calcite-notice",{closable:!0,kind:"danger",onCalciteNoticeClose:this.handleResetOptionsError,open:!0},e("header",{slot:"title"},n.t("options.failure.title")),e("p",{slot:"message"},n.t("options.failure.message")))))}renderPostEditor(){const{unsavedFeatures:t,discussion:s,entity:n,entityId:a,entityType:o,isHub:r,hasMap:d,context:l,unsavedRelatedFeatures:c,unsavedExistingFeatures:h,isMobile:u,locationId:p}=this;return e(i,null,e("arcgis-hub-discussions-post-editor",{context:l,discussion:s,entity:n,entityId:a,entityType:o,hasMap:d,isHub:r,isMobile:u,locationId:p,showHeader:!0,showLocations:!0,slot:"list-before",unsavedExistingFeatures:h,unsavedFeatures:t,unsavedRelatedFeatures:c}),e("arcgis-hub-discussions-private-notice",{slot:"list-before"}))}renderAddOrCreatePostButton(){const{intl:t,handleNewPost:s,postListProps:n,blockedNotice:a}=this;return void 0===(null==n?void 0:n.total)?null:n.total?e(i,null,e("calcite-button",{appearance:"outline",color:"blue",disabled:Boolean(a),"icon-start":"speech-bubble-plus",onClick:s,scale:"l",slot:"list-before",type:"button",width:"auto"},t.t("addPost")),a?e("arcgis-hub-discussions-blocked-notice",{slot:"list-before",variant:p.Item}):e("arcgis-hub-discussions-private-notice",{slot:"list-before"})):void 0}renderGoToAction(){const{enableGoTo:t,intl:s}=this;if(t)return e("calcite-action",{class:"discussions-go-to",onClick:this.handleGeometryGoTo,slot:"header-actions-end",text:s.t("showFullDiscussion")},e("calcite-icon",{class:"discussions-go-to-icon",icon:"extent",scale:"s"}))}renderPostList(){const{discussion:t,entity:s,entityId:i,entityType:n,displayFieldKey:a,displayFieldValid:o,displayFieldValue:r,context:d,hasMap:l,isHub:c,unsavedFeatures:h,unsavedRelatedFeatures:u,unsavedExistingFeatures:p,showPostEditor:b,locationId:m,intl:g,shouldRenderOptions:y,isMobile:v,dismissible:f,postListProps:w,handlePostListUpdated:I,handlePostListReady:j}=this,x={"location-list":Boolean(m)},F=m&&r?r:g.t("list.heading"),O=m?g.t("location.summary"):s.title;return e("calcite-panel",{closable:f,description:O,heading:F},this.renderGoToAction(),y&&e("calcite-action",{class:"discussions-options",onClick:this.handleDiscussionOptionsClick,scale:"m",slot:"header-actions-end",text:"Discussion Options"},e("calcite-icon",{class:"discussions-options-icon",icon:"gear",scale:"s"})),e("arcgis-hub-discussions-post-list",{class:x,context:d,discussion:m?`${t}%?id=%${m}`:`${t}`,displayFieldKey:a,displayFieldValid:o,displayFieldValue:r,entity:s,entityId:i,entityType:n,hasMap:l,isHub:c,isMobile:v,items:null==w?void 0:w.items,locationId:m,nextStart:null==w?void 0:w.nextStart,onArcgisHubDiscussionsPostListReady:j,onArcgisHubDiscussionsPostListUpdated:I,parentIds:!m&&[],ref:t=>{this.postListEl=t},showLocations:!0,start:null==w?void 0:w.start,total:null==w?void 0:w.total,unsavedExistingFeatures:p,unsavedFeatures:h,unsavedRelatedFeatures:u},!m&&(b?this.renderPostEditor():this.renderAddOrCreatePostButton()),this.renderEmpty()))}renderLoading(){return null}renderError(){const{intl:t}=this;return e("section",null,e("calcite-icon",{icon:"frown",scale:"l"}),e("header",null,t.t("error.title")),e("p",null,t.t("error.text")),e("calcite-button",{appearance:"transparent",color:"red",href:"https://hubstatus.arcgis.com/",onClick:this.handleCheckStatus,round:!0,scale:"l"},t.t("error.button")))}renderThread(){const{context:t,hasMap:s,isHub:i,unsavedFeatures:n,unsavedRelatedFeatures:a,unsavedExistingFeatures:o,discussion:r,entity:d,entityId:l,entityType:c,dismissible:h,displayFieldKey:u,displayFieldValid:p,displayFieldValue:b,intl:m,handleBackToList:g,postId:y,parentId:v,locationId:f,handleBackToThread:w,handleThreadReady:I,disableNavigation:j,isMobile:x,channelId:F,threadProps:O}=this;let C="generic.heading",T="thread.summary",k=g;return y?(C="reply.heading",T="reply.summary",k=w):f&&(C="location.heading"),j&&(C="list.heading"),e("calcite-panel",{closable:h,description:m.t(T),heading:m.t(C)},!j&&e("calcite-action",{class:"discussions-back",onClick:k,scale:"s",slot:"header-actions-start",text:"Back"},e("calcite-icon",{class:"discussions-back-icon",icon:"chevron-left",scale:"s"})),this.renderGoToAction(),e("arcgis-hub-discussions-thread",{channel:null==O?void 0:O.channel,channelGroups:null==O?void 0:O.channelGroups,channelId:F,context:t,discussion:r,displayFieldKey:u,displayFieldValid:p,displayFieldValue:b,entity:d,entityId:l,entityType:c,hasMap:s,isHub:i,isMobile:x,locationId:f,onArcgisHubDiscussionsThreadReady:I,parent:null==O?void 0:O.parent,parentCreator:null==O?void 0:O.parentCreator,parentCreatorOrg:null==O?void 0:O.parentCreatorOrg,parentId:v,post:null==O?void 0:O.post,postCreator:null==O?void 0:O.postCreator,postCreatorOrg:null==O?void 0:O.postCreatorOrg,postId:y,ref:t=>{this.thread=t},showLocations:!0,unsavedExistingFeatures:o,unsavedFeatures:n,unsavedRelatedFeatures:a}))}render(){return e(n,{"data-element":"discussions"},this.view())}static get assetsDirs(){return["locales"]}get element(){return a(this)}static get watchers(){return{context:["handleContextChanged"]}}};P([I({delay:300})],H.prototype,"fetchDependencies",null),P([b()],H.prototype,"captureEmptyListImpression",null),P([u({timeout:250})],H.prototype,"checkIsMobile",null),H.style='.sc-arcgis-hub-discussions-h{display:block;max-height:100%;overflow:auto;background-color:var(--calcite-ui-foreground-1);--arcgis-hub-layout-list-gap:0rem}calcite-panel.sc-arcgis-hub-discussions{height:max-content}section.sc-arcgis-hub-discussions{margin-top:1rem;margin-bottom:1rem;margin-left:0.75rem;margin-right:0.75rem;display:grid;gap:0.75rem;border-radius:0.25rem;padding:0.75rem;--tw-shadow:0 2px 8px 0 rgba(0, 0, 0, 0.12);--tw-shadow-colored:0 2px 8px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}header.sc-arcgis-hub-discussions{margin:0px;font-size:var(--calcite-font-size-1);line-height:1.5rem;font-weight:var(--calcite-font-weight-bold)}p.sc-arcgis-hub-discussions{margin:0px;font-size:var(--calcite-font-size--0);line-height:1.375rem}section.sc-arcgis-hub-discussions calcite-button.sc-arcgis-hub-discussions{width:-moz-fit-content;width:fit-content}calcite-button[icon-start="speech-bubble-plus"].sc-arcgis-hub-discussions{margin-top:1.5rem;margin-bottom:1.5rem;margin-left:1rem;margin-right:1rem;display:block}arcgis-hub-discussions-private-notice.sc-arcgis-hub-discussions,arcgis-hub-discussions-blocked-notice.sc-arcgis-hub-discussions{margin-left:1rem;margin-right:1rem;margin-bottom:1.5rem}.empty.sc-arcgis-hub-discussions arcgis-hub-discussions-private-notice.sc-arcgis-hub-discussions,.empty.sc-arcgis-hub-discussions arcgis-hub-discussions-blocked-notice.sc-arcgis-hub-discussions{margin:0px;margin-top:0.25rem}arcgis-hub-discussions-thread.sc-arcgis-hub-discussions{overflow:hidden;padding-top:1rem;padding-bottom:1rem}arcgis-hub-discussions-post-list.location-list.sc-arcgis-hub-discussions{padding-top:0.25rem;padding-bottom:0.25rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions{background-color:var(--calcite-ui-foreground-1);padding:1rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions div.sc-arcgis-hub-discussions{display:flex;justify-content:flex-end;padding-top:0.5rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions div.sc-arcgis-hub-discussions+calcite-notice.sc-arcgis-hub-discussions{margin-top:1rem;width:100%}.discussions-options.sc-arcgis-hub-discussions:active .discussions-options-icon.sc-arcgis-hub-discussions{--tw-text-opacity:1;color:rgb(21 21 21 / var(--tw-text-opacity))}.discussions-go-to.sc-arcgis-hub-discussions:active .discussions-go-to-icon.sc-arcgis-hub-discussions{--tw-text-opacity:1;color:rgb(21 21 21 / var(--tw-text-opacity))}.discussions-back.sc-arcgis-hub-discussions{border-width:0px;border-right-width:1px;border-style:solid;border-right-color:var(--calcite-ui-border-3)}.discussions-back.sc-arcgis-hub-discussions:active .discussions-back-icon.sc-arcgis-hub-discussions{--tw-text-opacity:1;color:rgb(21 21 21 / var(--tw-text-opacity))}arcgis-hub-discussions-post-editor[slot="list-before"].sc-arcgis-hub-discussions{margin-top:1.5rem;margin-bottom:1.5rem;margin-left:0.75rem;margin-right:0.75rem}';var L=function(t,s,e,i){var n,a=arguments.length,o=a<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,e,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(o=(a<3?n(o):a>3?n(s,e,o):n(s,e))||o);return a>3&&o&&Object.defineProperty(s,e,o),o};const G=class{constructor(e){t(this,e),this.arcgisHubDrawDone=s(this,"arcgisHubDrawDone",7),this.activeStyles={outline:".25rem solid #9747FF",padding:".25rem",outlineOffset:"-.25rem"},this.view=void 0,this.isConnected=void 0,d(this,"handleDone")}async componentWillLoad(){this.intl=await l.loadIntlForComponent(this.el)}connectedCallback(){this._connect()}disconnectedCallback(){this._disconnect()}_connect(){const{view:t,el:s,activeStyles:e}=this;Object.keys(e).forEach((s=>t.ui.container.style[s]=e[s])),t.ui.add(s),setTimeout((()=>{this.isConnected=!0}),50)}_disconnect(){const{view:t,activeStyles:s,el:e}=this;Object.keys(s).forEach((s=>t.ui.container.style.removeProperty(s))),t.ui.remove(e),this.isConnected=!1}handleDone(){this.arcgisHubDrawDone.emit()}get hasViewUI(){const{view:t}=this;return Boolean(t&&t.ui)}get styles(){const{isConnected:t}=this;return{"--display":t?"block":"none","--hub-map-outline":"#9747FF"}}render(){const{intl:t,styles:s,isConnected:i}=this;return e(n,{"aria-hidden":i,"data-element":"discussions-map-action-notice",style:s,tabindex:0},e("div",null,e("span",null,t.t("adding.notice")),e("calcite-button",{appearance:"outline-fill",kind:"neutral",onClick:this.handleDone,round:!0,scale:"s"},t.t("adding.action"))))}static get assetsDirs(){return["locales"]}get el(){return a(this)}};L([u({timeout:100}),T({when(){return this.hasViewUI&&!this.isConnected}})],G.prototype,"_connect",null),L([T({when(){return this.hasViewUI&&this.isConnected}})],G.prototype,"_disconnect",null),G.style=':host{left:50%;width:auto;display:var(--display);transform:translate(-50%, 0)}:host([aria-hidden="true"]){display:none}div{border-bottom-right-radius:0.75rem;border-bottom-left-radius:0.75rem;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));background-color:var(--hub-map-outline);font-weight:var(--calcite-font-weight-bold);font-size:var(--calcite-font-size--1)}calcite-button{margin-left:1rem}';const E=class{constructor(e){t(this,e),this.arcgisHubDiscussionsViewFull=s(this,"arcgisHubDiscussionsViewFull",7),this.arcgisHubDiscussionsGeometryZoomTo=s(this,"arcgisHubDiscussionsGeometryZoomTo",7),this.arcgisHubDiscussionsPreviewDidRender=s(this,"arcgisHubDiscussionsPreviewDidRender",7),this.arcgisHubDiscussionsPreviewDismiss=s(this,"arcgisHubDiscussionsPreviewDismiss",7),this.hubTelemetry=s(this,"hubTelemetry",7),this.context=void 0,this.locationId=void 0,this.postId=void 0,this.parentId=void 0,this.channelId=void 0,this.discussion=void 0,this.loading=!0,this.post=void 0,this.postCreator=void 0,this.channel=void 0,this.channelGroups=void 0,d(this,"handleViewFullThread","handleZoomTo","handleDismiss")}get creatorFullName(){const{intl:t,post:s,postCreator:e}=this;let i=t.t("anonymous");return(e||(null==s?void 0:s.creator))&&(i=(null==e?void 0:e.fullName)||t.t("privateUser")),i}async componentWillLoad(){this.intl=await l.loadIntlForComponent(this.element),this.initialize()}componentDidRender(){this.arcgisHubDiscussionsPreviewDidRender.emit(this.element.offsetHeight)}async initialize(){this._initialize()}async _initialize(){const{channelId:t,postId:s,parentId:e,locationId:i}=this;if(t&&(e||s||i)){this.loading=!0;const t=i&&!e?await this.fetchDetailsByLocationId():await this.fetchDetails(s);Object.assign(this,t,{loading:!1}),this.emitHubTelemetry(c.dictionary.category.interaction.action.open.label.popUp.details.post)}}async fetchDetailsByLocationId(){const{locationId:t,context:s,discussion:e}=this,{items:[i]}=await D(Object.assign({data:{discussion:`${e}%?id=%${t}%`,num:1,sortBy:x.UPDATED_AT,sortOrder:F.DESC,start:1}},s.hubRequestOptions));return this.fetchDetails(i.id,i)}async fetchDetails(t,s){const{context:e}=this,i=await m({postId:t,post:s},e.hubRequestOptions),[n,a]=await Promise.all([k(i,e.hubRequestOptions),g(i,e.hubRequestOptions)]);return Object.assign(Object.assign(Object.assign({},i),n),a)}emitHubTelemetry(t){const{postId:s,parentId:e,channelId:i,channel:n}=this;this.hubTelemetry.emit(Object.assign(Object.assign({},t),{postId:s,parentId:e,channelId:i,channelAccess:n.access}))}handleViewFullThread(){this.emitHubTelemetry(c.dictionary.category.interaction.action.open.label.thread.details[this.locationId?"location":"post"]),this.arcgisHubDiscussionsViewFull.emit()}handleZoomTo(){this.emitHubTelemetry(c.dictionary.category.interaction.action.zoom.label.in),this.arcgisHubDiscussionsGeometryZoomTo.emit(this.post)}handleDismiss(){this.emitHubTelemetry(c.dictionary.category.interaction.action.close.label.popUp.details.post),this.arcgisHubDiscussionsPreviewDismiss.emit()}renderAvatars(){const{context:t,channel:s,channelGroups:n,postCreator:a,post:o,intl:d}=this,{portal:l,token:c}=t.session,h=!a&&o?{username:o.creator}:a;return e(i,null,e("calcite-avatar",{"full-name":null==h?void 0:h.fullName,scale:"m",thumbnail:(null==h?void 0:h.thumbnail)&&R(l,h,c),"user-id":null==h?void 0:h.id,username:null==h?void 0:h.username}),e("calcite-avatar",{"full-name":r(s,n,d.t("unnamedChannel")),scale:"s"}))}renderContent(){const{post:t}=this;return e(i,null,e("div",{class:"avatars"},this.renderAvatars()),e("address",null,e("b",null,this.creatorFullName),e("span",null,"·"),e("arcgis-relative-date",{dateTime:t.createdAt,formatStyle:"short"})),e("arcgis-multiline-ellipsis",{innerHTML:t.body,lines:2}),e("calcite-action-group",{id:"text-actions",layout:"horizontal"},e("calcite-action",{onClick:this.handleViewFullThread,scale:"s",text:this.intl.t("view"),textEnabled:!0}),!1,e("calcite-action",{onClick:this.handleDismiss,scale:"s",text:this.intl.t("dismiss"),textEnabled:!0})))}renderLoading(){return e("arcgis-hub-discussions-post-skeleton",null)}render(){return e(n,{"data-element":"discussions-map-preview"},this.loading?this.renderLoading():this.renderContent())}static get assetsDirs(){return["locales"]}get element(){return a(this)}static get watchers(){return{channelId:["initialize"],parentId:["initialize"],locationId:["initialize"],postId:["initialize"]}}};(function(t,s,e,i){var n,a=arguments.length,o=a<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,e,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(o=(a<3?n(o):a>3?n(s,e,o):n(s,e))||o);a>3&&o&&Object.defineProperty(s,e,o)})([u({timeout:0})],E.prototype,"initialize",null),E.style=":host{display:block;background-color:var(--calcite-ui-foreground-1);padding:1rem;padding-bottom:0.5rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}address{margin-bottom:0.125rem;display:grid;font-size:var(--calcite-font-size--1);font-style:normal;line-height:1.25rem;grid-template-columns:minmax(0, max-content) 1rem minmax(0, max-content)}address b{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}address span{display:flex;justify-content:center;color:var(--calcite-ui-text-2)}address arcgis-relative-date{color:var(--calcite-ui-text-2)}arcgis-multiline-ellipsis{font-size:var(--calcite-font-size-0);line-height:1.375}calcite-action-group{margin-left:2.75rem}.avatars{position:relative;grid-row:span 2 / span 2;float:left;margin-right:1.25rem;display:flex}.avatars calcite-avatar+calcite-avatar{position:absolute;top:1rem;left:1rem;z-index:10;border-radius:9999px;border:3px solid var(--calcite-ui-foreground-1)}@media only screen and (max-width: 640px){:host{border-radius:1.75rem}}@media only screen and (min-width: 640px){:host{border-radius:1.75rem 1.75rem 1.75rem 0}}";const V=class{constructor(s){t(this,s)}async componentWillLoad(){this.intl=await l.loadIntlForComponent(this.el)}render(){const{intl:t}=this;return e(n,null,e("calcite-notice",{open:!0,scale:"m"},e("div",{slot:"title"},t.t("title")),e("div",{slot:"message"},t.t("message")),e("calcite-link",{href:"https://doc.arcgis.com/en/hub/team/how-discussions-work.htm",iconEnd:"launch",slot:"link",title:t.t("link.title")},t.t("link.text"))))}static get assetsDirs(){return["locales"]}get el(){return a(this)}};V.style=":host{display:block}";var _,M=function(t,s,e,i){var n,a=arguments.length,o=a<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,e,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(o=(a<3?n(o):a>3?n(s,e,o):n(s,e))||o);return a>3&&o&&Object.defineProperty(s,e,o),o};!function(t){t.Loading="loading",t.ParentAndReply="parent_and_reply",t.ParentAndReplies="parent_and_replies",t.ThreadDeleted="thread_deleted",t.ChannelDeleted="channel_deleted"}(_||(_={}));const A=class{constructor(e){t(this,e),this.arcgisHubDiscussionsPostSelect=s(this,"arcgisHubDiscussionsPostSelect",7),this.hubTelemetry=s(this,"hubTelemetry",7),this.arcgisHubDiscussionsThreadReady=s(this,"arcgisHubDiscussionsThreadReady",7),this.context=void 0,this.hasMap=void 0,this.isHub=void 0,this.unsavedFeatures=void 0,this.unsavedRelatedFeatures=void 0,this.unsavedExistingFeatures=[],this.postId=void 0,this.post=void 0,this.postCreator=void 0,this.postCreatorOrg=void 0,this.parent=void 0,this.parentId=void 0,this.parentCreator=void 0,this.parentCreatorOrg=void 0,this.channelId=void 0,this.channel=void 0,this.channelGroups=void 0,this.discussion=void 0,this.entityId=void 0,this.entityType=void 0,this.entity=void 0,this.displayFieldValid=void 0,this.displayFieldValue=void 0,this.displayFieldKey=void 0,this.isMobile=void 0,this.locationId=void 0,this.showLocations=void 0,this.locationDescriptionText=void 0,this.intl=void 0,this._loading=void 0,this.parentReady=!1,this.postReady=!1,this.postListReady=!1,this.postEditorReady=!1,this.ready=!1,d(this,"renderParentAndReply","renderParentAndReplies","renderThreadDeleted","handleViewAllReplies","handleViewAllPosts","renderLoading","handleParentReady","handlePostReady","handlePostListReady","handlePostEditorReady")}componentWillLoad(){this.initialize()}async initialize(){this.loadTranslations(),this.context&&this.loadDependencies()}async loadTranslations(){this.intl=await l.loadIntlForComponent(this.element)}async loadDependencies(){return this._loading=!0,this.fetchDependencies().then((t=>{Object.assign(this,t),this._loading=!1}))}fetchDependencies(){return this._fetchDependencies()}handleContextChanged(t,s){t&&!s&&this.loadDependencies()}handleParentReady(){this.parentReady=!0,this.updateReady()}handlePostReady(){this.postReady=!0,this.updateReady()}handlePostEditorReady(){this.postEditorReady=!0,this.updateReady()}handlePostListReady(){this.postListReady=!0,this.updateReady()}handleReadyChange(t){t&&this.arcgisHubDiscussionsThreadReady.emit()}updateReady(){this.ready=[[this.postEditorRef,this.postEditorReady],[this.parentRef,this.parentReady],[this.postRef,this.postReady],[this.postListRef,this.postListReady]].filter((([t])=>Boolean(t))).every((([t,s])=>s))}async getPostEditorRef(){return this.postEditorRef}async getPostListRef(){return this.postListRef}async _fetchDependencies(){const{isHub:t,context:s,postId:e,post:i,parent:n,parentId:a,discussion:o,entityId:r,entityType:d,entity:l,locationId:c,parentCreator:h,channelId:u,channel:p,channelGroups:b,displayFieldKey:g,displayFieldValid:I,displayFieldValue:j}=this,[x,F]=await Promise.all([m({postId:e,post:i},s.hubRequestOptions),f({isHub:t},s.hubRequestOptions)]),O=await y(Object.assign({parentId:a,parent:n},x),s.hubRequestOptions),[C,T,D]=await Promise.all([v(Object.assign({parentCreator:h},O),s.hubRequestOptions),w(Object.assign(Object.assign({discussion:o,entityId:r,entityType:d,entity:l,locationId:c,displayFieldKey:g,displayFieldValid:I,displayFieldValue:j},x),O),s.hubRequestOptions),k(Object.assign(Object.assign({channelId:u,channel:p,channelGroups:b},x),O),s.hubRequestOptions)]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x),O),C),F),T),D)}get loading(){const{intl:t,_loading:s,context:e,channel:i}=this;return!t||!e||s||void 0===i}handlePostOrReplyDeleted(t){const{parent:s,post:e}=this;t.detail.id!==(null==s?void 0:s.id)&&t.detail.id!==(null==e?void 0:e.id)||(t.detail.id===(null==s?void 0:s.id)?this.parent=null:this.post=null,this.deletedDuringSession=!0)}handleViewAllReplies(){const{channelId:t,channel:s,channelGroups:e,parent:i,parentId:n,postId:a,parentCreator:o,parentCreatorOrg:r}=this;this.arcgisHubDiscussionsPostSelect.emit({channel:s,channelId:t,channelGroups:e,parentId:n,parent:i,parentCreator:o,parentCreatorOrg:r}),this.emitHubTelemetry(Object.assign(Object.assign({},c.dictionary.category.interaction.action.open.label.thread),{postId:a,parentId:n}))}handleViewAllPosts(){const{parentId:t,postId:s}=this;this.arcgisHubDiscussionsPostSelect.emit({channelId:null,channel:null,channelGroups:null,parent:null,parentId:null,parentCreator:null,parentCreatorOrg:null}),this.emitHubTelemetry(Object.assign(Object.assign({},c.dictionary.category.interaction.action.close.label.thread),{postId:s,parentId:t}))}emitHubTelemetry(t){const{channelId:s,channel:e}=this;this.hubTelemetry.emit(Object.assign({channelId:s,channelAccess:null==e?void 0:e.access},t))}get views(){const{renderLoading:t,renderParentAndReply:s,renderParentAndReplies:e,renderThreadDeleted:i,renderChannelDeleted:n}=this;return{[_.Loading]:{render:t},[_.ParentAndReply]:{render:s},[_.ParentAndReplies]:{render:e},[_.ThreadDeleted]:{render:i},[_.ChannelDeleted]:{render:n}}}get view(){const{views:t,parentId:s,postId:e,parent:i,post:n,loading:a,channel:o}=this;let r;return r=a?_.Loading:null===o?_.ChannelDeleted:s&&e&&null===i&&null===n?_.ThreadDeleted:e?_.ParentAndReply:_.ParentAndReplies,t[r]}handleHubTelemetry(t){const s=[{from:c.dictionary.category.interaction.action.viewed.label.post.details.postList,to:c.dictionary.category.interaction.action.viewed.label.post.details.thread},{from:c.dictionary.category.interaction.action.open.label.postList,to:null}].find((({from:s})=>Object.entries(s).every((([s,e])=>{var i;return(null===(i=t.detail)||void 0===i?void 0:i[s])===e}))));s&&(s.to?Object.assign(t.detail,s.to):t.stopPropagation())}captureThreadDeletedImpression(){const{postId:t,parentId:s}=this;this.emitHubTelemetry(Object.assign(Object.assign({},c.dictionary.category.interaction.action.viewed.label.post.details.thread),{postId:t,parentId:s,response:c.constants.response.FAILURE}))}get blockedNotice(){const{entity:t,entityType:s,channelGroups:e}=this,i=!(null==e?void 0:e.length)||e.every((t=>!t||C(t))),n=C(t);let a;return i||n?i?n||(a="group"===s?p.Group:p.Item):a=p.Group:a=p.Reply,a}renderChannelDeleted(){return e("p",null,"channel deleted")}renderParent(){const{channel:t,channelGroups:s,channelId:i,context:n,discussion:a,displayFieldKey:o,displayFieldValid:r,displayFieldValue:d,entity:l,entityId:c,entityType:h,hasMap:u,isHub:p,isMobile:b,locationDescriptionText:m,locationId:g,parentId:y,parent:v,unsavedExistingFeatures:f,unsavedFeatures:w,unsavedRelatedFeatures:I,parentCreator:j,parentCreatorOrg:x,handleParentReady:F,showLocations:O}=this;return e("arcgis-hub-discussions-post",{channel:t,channelGroups:s,channelId:i,context:n,discussion:a,displayFieldKey:o,displayFieldValid:r,displayFieldValue:d,entity:l,entityId:c,entityType:h,hasMap:u,isHub:p,isMobile:b,locationDescriptionText:m,locationId:g,onArcgisHubDiscussionsPostReady:F,parentCreatorOrg:x,post:v,postCreator:j,postId:y,ref:t=>{this.parentRef=t},showLocations:O,unsavedExistingFeatures:f,unsavedFeatures:w,unsavedRelatedFeatures:I})}renderParentAndReplies(){const{context:t,hasMap:s,unsavedFeatures:n,unsavedRelatedFeatures:a,unsavedExistingFeatures:o,displayFieldKey:r,displayFieldValid:d,displayFieldValue:l,intl:c,isHub:h,discussion:u,parentId:p,parent:b,entity:m,entityId:g,entityType:y,channelId:v,channel:f,channelGroups:w,blockedNotice:I,isMobile:j,locationDescriptionText:x,locationId:F,handlePostListReady:O,handlePostEditorReady:C,showLocations:T}=this;return e(i,null,this.renderParent(),Boolean(b)&&!I&&e("arcgis-hub-discussions-post-editor",{channel:f,channelGroups:w,channelId:v,context:t,discussion:u,entity:m,entityId:g,entityType:y,hasMap:s,isHub:h,isMobile:j,locationId:F,onArcgisHubDiscussionsPostEditorReady:C,parent:b,parentId:p,ref:t=>{this.postEditorRef=t},showLocations:T,unsavedExistingFeatures:o,unsavedFeatures:n,unsavedRelatedFeatures:a}),I&&e("arcgis-hub-discussions-blocked-notice",{variant:I}),e("arcgis-hub-discussions-post-list",{context:t,discussion:u,displayFieldKey:r,displayFieldValid:d,displayFieldValue:l,entity:m,entityId:g,entityType:y,hasMap:s,isHub:h,isMobile:j,locationDescriptionText:x,locationId:F,onArcgisHubDiscussionsPostListReady:O,parentIds:[p],ref:t=>{this.postListRef=t},showLocations:T,unsavedExistingFeatures:o,unsavedFeatures:n,unsavedRelatedFeatures:a},e("calcite-notice",{kind:"danger",open:!0,scale:"m",slot:"error"},e("div",{slot:"title"},c.t("error")),e("div",{slot:"message"},c.t("repliesFailure")))))}renderParentAndReply(){const{intl:t,handleViewAllReplies:s,post:n,postCreator:a,postCreatorOrg:o,context:r,unsavedFeatures:d,hasMap:l,isHub:c,unsavedRelatedFeatures:h,unsavedExistingFeatures:u,channel:p,channelGroups:b,channelId:m,isMobile:g,locationId:y,discussion:v,displayFieldKey:f,displayFieldValid:w,displayFieldValue:I,entity:j,entityId:x,entityType:F,parentId:O,parent:C,parentCreator:T,parentCreatorOrg:k,postId:D,handlePostReady:R}=this;return e(i,null,this.renderParent(),Boolean(n)&&e("calcite-notice",{open:!0,scale:"s"},e("div",{slot:"title"},t.t("reply.single.title")),e("calcite-link",{onClick:s,slot:"link"},t.t("reply.single.link"))),e("arcgis-hub-discussions-post",{channel:p,channelGroups:b,channelId:m,context:r,discussion:v,displayFieldKey:f,displayFieldValid:w,displayFieldValue:I,entity:j,entityId:x,entityType:F,hasMap:l,isHub:c,isMobile:g,locationDescriptionText:this.locationDescriptionText,locationId:y,onArcgisHubDiscussionsPostReady:R,parent:C,parentCreator:T,parentCreatorOrg:k,parentId:O,post:n,postCreator:a,postCreatorOrg:o,postId:D,ref:t=>{this.postRef=t},showLocations:this.showLocations,unsavedExistingFeatures:u,unsavedFeatures:d,unsavedRelatedFeatures:h}))}renderThreadDeleted(){const{intl:t,deletedDuringSession:s}=this;return s||this.captureThreadDeletedImpression(),e("calcite-notice",{kind:"danger",open:!0,scale:"m"},e("div",{slot:"title"},t.t("thread.deleted.title")),e("div",{slot:"message"},t.t("thread.deleted.message")),e("calcite-link",{onClick:this.handleViewAllPosts,slot:"link"},t.t("thread.deleted.action")))}renderLoading(){return null}render(){const{view:t}=this;return e(n,{"data-element":"discussions-thread"},t.render())}static get assetsDirs(){return["locales"]}get element(){return a(this)}static get watchers(){return{context:["handleContextChanged"],ready:["handleReadyChange"]}}};M([I({delay:300})],A.prototype,"fetchDependencies",null),M([b()],A.prototype,"captureThreadDeletedImpression",null),A.style=".sc-arcgis-hub-discussions-thread-h{--arcgis-hub-layout-list-gap:0;display:block;overflow:hidden;background-color:var(--calcite-ui-foreground-1);padding-top:0.75rem;padding-bottom:0.75rem}arcgis-hub-discussions-post-editor.sc-arcgis-hub-discussions-thread{margin-top:1.5rem;margin-bottom:1.5rem;padding-left:0.75rem;padding-right:0.75rem}arcgis-hub-discussions-post-list.sc-arcgis-hub-discussions-thread{margin-left:1rem;margin-right:1rem}arcgis-hub-discussions-post.loading.sc-arcgis-hub-discussions-thread:not([parent-id]){margin-left:1rem;margin-right:1rem;margin-bottom:1rem}arcgis-hub-discussions-post[parent-id].sc-arcgis-hub-discussions-thread{padding-left:1rem;padding-right:1rem}arcgis-hub-discussions-post.sc-arcgis-hub-discussions-thread:not([parent-id])+arcgis-hub-discussions-post[parent-id].sc-arcgis-hub-discussions-thread{margin-top:1.5rem;margin-bottom:1.5rem}calcite-notice.sc-arcgis-hub-discussions-thread{margin-top:1.5rem;margin-bottom:1.5rem;padding-left:1rem;padding-right:1rem}calcite-notice.sc-arcgis-hub-discussions-thread:first-child{margin-top:0px}arcgis-hub-discussions-blocked-notice.sc-arcgis-hub-discussions-thread{margin-top:1.5rem;margin-bottom:1.5rem;margin-left:1rem;margin-right:1rem}";export{H as arcgis_hub_discussions,G as arcgis_hub_discussions_map_action_notice,E as arcgis_hub_discussions_map_preview,V as arcgis_hub_discussions_private_notice,A as arcgis_hub_discussions_thread}