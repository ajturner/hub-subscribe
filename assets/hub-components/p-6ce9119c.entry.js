import{r as e,c as t,h as i,H as a,a as l}from"./p-d4ba4c14.js";import{b as n}from"./p-fd260f2d.js";import{c,g as s,i as o}from"./p-839b8118.js";import{i as r}from"./p-be5c5009.js";import{g as h}from"./p-30a7cbb2.js";const d="arcgis-hub-license-picker-modal",m=`\n    ${d} {\n      --calcite-font-size--1: 1rem;\n      --calcite-font-size--2: 1rem;\n    }\n\n    ${d} calcite-modal [slot="content"] {\n      height: 50vh;\n    }\n\n    ${d} calcite-modal calcite-tabs {\n      min-height: 100%\n    }\n\n    ${d} calcite-modal calcite-tab {\n      height: auto;\n    }\n\n    ${d} calcite-modal .custom-editor {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    }\n\n    ${d} calcite-modal arcgis-hub-rich-text {\n      flex-grow: 1;\n    }\n\n    ${d} calcite-modal .ck.ck-editor {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    }\n\n    ${d} calcite-modal .ck.ck-editor__main {\n      flex-grow: 1;\n    }\n\n    ${d} calcite-modal .ck.ck-editor__editable {\n      height: 100%;\n      min-height: 12rem;\n    }\n\n    @media screen and (max-width: 816px) {\n      ${d} calcite-modal [slot="content"] {\n        height: 100%;\n      }\n    }\n  `,u=class{constructor(i){e(this,i),this.arcgisHubLicensePickerModalApply=t(this,"arcgisHubLicensePickerModalApply",7),this.arcgisHubLicensePickerModalCancel=t(this,"arcgisHubLicensePickerModalCancel",7),this.licenseChoiceAbbrs=["CC0","CC BY","CC BY-SA","CC BY-ND","CC BY-NC","CC BY-NC-SA","CC BY-NC-ND","PDDL","ODbL","ODC BY"],this.modalIsOpen=!1,this.licenseInfo=void 0,this.wasCustomLicense=void 0,this.wasStructuredLicense=void 0,n(this,"handleApply","handleCancel","handleLicenseSelection","handleOpenLink","handleTextChange","setRichTextEditor")}get structuredLicense(){return h(this.licenseInfo)}async componentWillLoad(){this.intl=await r.loadIntlForComponent(this.element),this.licenseChoices=c(this.licenseChoiceAbbrs)}handleLicenseSelection(e){const t=e.detail;if(t.size){const e=t.keys().next().value,i=this.licenseChoices.find((t=>t.abbr===e));this.licenseInfo=i.abbr||""}}handleTextChange(e){this.licenseInfo=e.target.value}handleApply(){this.wasCustomLicense&&!o(this.structuredLicense.type)&&!confirm(this.intl.t("overwriteWarning"))||this.arcgisHubLicensePickerModalApply.emit(this.licenseInfo)}handleCancel(){this.arcgisHubLicensePickerModalCancel.emit()}handleOpenLink(e){window.open(e.target.dataset.url)}setRichTextEditor(e){this.richTextEditor=e}render(){return i(a,{"data-element":"license-picker-modal"},i("style",null,m),i("calcite-modal",{"aria-labelledby":"license-picker-modal",open:this.modalIsOpen},i("h3",{class:"license-picker-modal-title",slot:"header"},this.intl.t("title")),i("div",{slot:"content"},i("calcite-tabs",{layout:"center",scale:"m"},i("calcite-tab-nav",{slot:"title-group"},i("calcite-tab-title",{selected:!0},this.intl.t("chooseTabTitle")),i("calcite-tab-title",null,this.intl.t("editTabTitle"))),i("calcite-tab",{selected:!0},i("calcite-label",{class:"choose-picker-label",for:"license-picker"},this.intl.t("chooseTabPickerLabel")),i("calcite-notice",{kind:"warning",open:this.wasCustomLicense},i("div",{slot:"title"},this.intl.t("overwriteCustomLicenseTitle")),i("div",{slot:"link"},this.intl.t("overwriteCustomLicenseLinkMessage",{a:(...e)=>i("a",{href:"https://doc.arcgis.com/en/hub/content/add-and-manage-groups.htm#ESRI_SECTION1_879A381A9C8C42D59018947CB2509CB2"},e)}))),i("calcite-value-list",{class:"license-picker"},this.licenseChoices.map((e=>i("calcite-value-list-item",{description:s(this.intl,e.type),key:e.type,label:e.abbr,selected:e.type===this.structuredLicense.type,value:e.abbr},i("calcite-action",{"aria-label":this.intl.t("licenseInfoButtonAriaLabel"),"aria-labelledby":e.abbr,"data-url":e.url,icon:"information",onClick:this.handleOpenLink,slot:"actions-end",text:""})))))),i("calcite-tab",null,i("div",{class:"custom-editor"},i("calcite-notice",{kind:"warning",open:this.wasStructuredLicense},i("div",{slot:"title"},this.intl.t("overwriteStructuredLicenseTitle")),i("div",{slot:"message"},this.intl.t("overwriteStructuredLicenseMessage")),i("div",{slot:"link"},this.intl.t("overwriteStructuredLicenseLinkMessage",{a:(...e)=>i("a",{href:"https://doc.arcgis.com/en/hub/content/add-and-manage-groups.htm#ESRI_SECTION1_879A381A9C8C42D59018947CB2509CB2"},e)}))),i("arcgis-hub-rich-text",{label:this.intl.t("editTabEditorLabel"),name:this.intl.t("editTabEditorLabel"),placeholder:this.intl.t("editTabEditorPlaceholder"),ref:this.setRichTextEditor,toolbar:"heading,|,bold,italic,link,|,undo,redo",value:this.licenseInfo}))))),i("calcite-button",{appearance:"outline",class:"cancel-button",onClick:this.handleCancel,slot:"secondary",width:"full"},this.intl.t("cancelButton")),i("calcite-button",{appearance:"solid",class:"apply-button",onClick:this.handleApply,slot:"primary",width:"full"},this.intl.t("applyButton"))))}static get assetsDirs(){return["locales"]}get element(){return l(this)}};u.style="";export{u as arcgis_hub_license_picker_modal}