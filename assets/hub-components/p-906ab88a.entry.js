import{r as t,h as i,H as e}from"./p-d4ba4c14.js";import{c as a}from"./p-7daa6196.js";import{g as s}from"./p-796574a4.js";function o(t){return{features:null==t?void 0:t.map((t=>({attributes:Object.assign(Object.assign({},t),{timestamp:new Date(t.timestamp).getTime()})})))}}function r(t,i,e){const a=null==t?void 0:t[0];if(a){const t=Object.keys(a);return[{category:{field:t[0],label:i,type:"timestamp"},source:"telemetry",value:{field:t[1],label:e,type:"number"}}]}}const n=class{constructor(i){t(this,i),this.data=void 0,this.category=void 0,this.reportTitle=void 0,this.options=void 0,this.isLoading=void 0,this.timeLabel=void 0,this.dataLabel=void 0,this.type=void 0,this.isTransforming=!0,this.chartData=void 0}async handleChange(){this.isLoading||(this.chartData=await this.transform(this.data,this.options),this.isTransforming=!1)}async componentWillLoad(){this.handleChange()}async transform(t,i={}){const{dataTransforms:e,requestParams:a}=i;return t.map((t=>{var i,o;const r=a.metrics[0];let n=s(t,r);const c=(null===(o=null===(i=null==e?void 0:e.find((t=>t.name===r)))||void 0===i?void 0:i.value)||void 0===o?void 0:o.display)||(t=>t);return n=Number(c(n)),Object.assign(Object.assign({},t),{[r]:n})}))}get chartConfig(){const{category:t,chartData:i,timeLabel:e,dataLabel:s,type:n}=this;if(null==i?void 0:i.length)return function(t,i,e,s,n){const c={axes:[,{valueFormat:{type:"number",intlOptions:{style:"decimal",notation:"compact",minimumFractionDigits:0,maximumFractionDigits:0}}}],series:[]};return"hour"===i&&(c.series[0]={dataTooltipDateFormat:{type:"date",intlOptions:{hour:"numeric",minute:"numeric"}}}),a({type:e,datasets:[{data:o(t)}],series:r(t,s,n)},c)}(i,t,n,e,s)}render(){return i(e,null,this.isLoading||this.isTransforming?i("arcgis-skeleton-loader",{active:!0,rows:5}):i("arcgis-hub-chart",{chartTitle:this.reportTitle,config:this.chartConfig},i("h2",null,this.reportTitle)))}static get watchers(){return{data:["handleChange"],options:["handleChange"]}}};n.style=":host{display:block}h2{margin:0px;font-size:var(--calcite-font-size-3);line-height:2rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}arcgis-hub-chart{height:100%}";export{n as arcgis_telemetry_chart}