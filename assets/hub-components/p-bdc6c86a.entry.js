import{r as t,c as e,h as i,H as s,a}from"./p-d4ba4c14.js";import{i as o}from"./p-be5c5009.js";import{b as r}from"./p-fd260f2d.js";import"./p-d8c815da.js";import{d as p,a as n,b as d,c}from"./p-066a64ad.js";import{y as l,z as m}from"./p-85d6867e.js";import{deleteDiscussion as h}from"./p-db05bb7b.js";import{d as j}from"./p-58cf73b6.js";import{d as b}from"./p-8cf4bd83.js";import{C as f}from"./p-d86e4f15.js";import{g}from"./p-75d6da59.js";import{c as u}from"./p-f845584b.js";import{v as y}from"./p-13f8e63a.js";import{a as k}from"./p-10274eb9.js";import"./p-6f931af6.js";import"./p-56b73d71.js";import"./p-3904125b.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-637ea136.js";import"./p-b728aff4.js";import"./p-796574a4.js";import"./p-52612356.js";import"./p-af59e67b.js";import"./p-b295a5ae.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-dcdf7b57.js";import"./p-a0deb8c6.js";import"./p-6dcae6cd.js";import"./p-2acb70a6.js";import"./p-cea8413b.js";import"./p-d763eacf.js";import"./p-ad325ed1.js";import"./p-8e7f4c22.js";import"./p-69555c48.js";import"./p-7b082f5d.js";import"./p-5955d0c4.js";import"./p-16a95e5b.js";import"./p-8ccaf06d.js";import"./p-9b205605.js";import"./p-c8e0e01f.js";import"./p-59fd2498.js";import"./p-97274a47.js";import"./p-30a7cbb2.js";import"./p-90dc0f6f.js";import"./p-7202c430.js";import"./p-8dbea197.js";import"./p-e43616ff.js";import"./p-ca048216.js";import"./p-4a14259a.js";import"./p-235bb6ee.js";import"./p-783242bc.js";import"./p-903ef8af.js";import"./p-c836a9b6.js";import"./p-bded806b.js";import"./p-87582fe0.js";import"./p-9646abb2.js";import"./p-dfe5a97d.js";import"./p-62163eff.js";import"./p-742d0454.js";import"./p-89f8c546.js";import"./p-d27eec8d.js";import"./p-b3959606.js";import"./p-09f00a2a.js";import"./p-69965d84.js";import"./p-24698668.js";import"./p-52b2d57a.js";import"./p-5d9da1ee.js";import"./p-a2594b73.js";const v=class{constructor(i){t(this,i),this.arcgisHubWorkspaceEntityDelete=e(this,"arcgisHubWorkspaceEntityDelete",7),this.arcgisHubWorkspaceEntitySaved=e(this,"arcgisHubWorkspaceEntitySaved",7),this.hubTelemetry=e(this,"hubTelemetry",7),this.handleCalciteModalClose=()=>{this.handleDeleteModalClose(),this.hubTelemetry.emit(b.dictionary.category.interaction.action.close.label.modal.details.deleteContent)},this.entity=void 0,this.context=void 0,this.isDeleteModalOpen=void 0,this.footerSlotEl=void 0,r(this,"deleteEntity","handleDeleteBtnClick","handleDeleteModalClose")}async componentWillLoad(){this.intl=await o.loadIntlForComponent(this.element)}get editorType(){return`hub:${this.type}:settings`}get type(){return g(this.entity)}get canDelete(){const{access:t}=u(`hub:${this.type}:delete`,this.context,this.entity);return t}get showSettingsEditor(){return this.footerSlotEl&&y.includes(this.editorType)}handleEditorSaved(t){t.stopPropagation(),this.arcgisHubWorkspaceEntitySaved.emit(t.detail)}handleDeleteBtnClick(){this.isDeleteModalOpen=!0,this.hubTelemetry.emit(b.dictionary.category.interaction.action.open.label.modal.details.deleteContent)}handleDeleteModalClose(){this.isDeleteModalOpen=!1}renderDeleteBtn(){return i("calcite-button",{appearance:"outline-fill",class:"entity-settings__deleteBtn",disabled:!this.canDelete,kind:"danger",onClick:this.handleDeleteBtnClick,round:!0},this.intl.t(`delete.${this.type}`))}renderDeleteModal(){return i("calcite-modal",{kind:"danger",onCalciteModalClose:this.handleCalciteModalClose,open:this.isDeleteModalOpen},i("div",{class:"modal-header",slot:"header"},this.intl.t(`deleteModal.header.${this.type}`)),i("div",{slot:"content"},i("div",null,this.intl.t("deleteModal.content")),i("div",{class:"entity-settings__entity-name"},this.entity.name)),i("calcite-button",{appearance:"outline",onClick:this.handleDeleteModalClose,round:!0,slot:"secondary"},this.intl.t("deleteModal.cancel")),i("calcite-button",{kind:"danger",onClick:this.deleteEntity,round:!0,slot:"primary"},this.intl.t("deleteModal.delete")))}async deleteEntity(){try{await async function(t,e,i){switch(t){case"project":await c(e.id,i.userRequestOptions);break;case"initiative":await j(e.id,i.userRequestOptions);break;case"site":await m(e.id,i.hubRequestOptions);break;case"content":await d(e.id,i.userRequestOptions);break;case"discussion":await h(e.id,i.hubRequestOptions);break;case"page":await l(e.id,i.userRequestOptions);break;case"initiativeTemplate":await n(e.id,i.userRequestOptions);case"template":await p(e.id,i.userRequestOptions)}}(this.type,this.entity,this.context),this.arcgisHubWorkspaceEntityDelete.emit(this.entity),this.hubTelemetry.emit(Object.assign(Object.assign({},b.dictionary.category.content.action.delete),{response:b.constants.response.SUCCESS}))}catch(t){console.error(`Error deleting ${this.type} ${this.entity.id}`,t),this.hubTelemetry.emit(Object.assign(Object.assign({},b.dictionary.category.content.action.delete),{response:b.constants.response.FAILURE}))}finally{this.isDeleteModalOpen=!1}}renderSidePanel(){let t;switch(this.type){case"content":if(k(this.entity)){const e="sidePanel.content.extractNotice";t=i("calcite-notice",{icon:"lightbulb",kind:"brand",open:!0,width:"full"},i("div",{slot:"title"},this.intl.t(`${e}.title`)),i("div",{slot:"message"},this.intl.t(`${e}.message`,{docLink:(...t)=>i("calcite-link",{href:"https://doc.arcgis.com/en/arcgis-online/manage-data/use-hosted-layers.htm#GUID-47A1D795-B330-45D7-89F7-9203A99E6924",target:"_blank"},t)})))}}return t&&i("div",{slot:"side-panel"},t)}render(){return i(s,{"data-element":"entity-settings"},this.renderDeleteModal(),i("arcgis-hub-workspace-pane",{stickyFooter:!0},i("h2",{slot:"title"},this.intl.t("settings")),i("div",null,this.showSettingsEditor&&i("arcgis-hub-entity-editor",{context:this.context,editorType:this.editorType,entity:this.entity,footerSlotRef:this.footerSlotEl,variant:f.workspace}),this.renderDeleteBtn()),i("div",{ref:t=>{this.footerSlotEl=t},slot:"footer"}),this.renderSidePanel()))}static get assetsDirs(){return["locales"]}get element(){return a(this)}};v.style=":host{display:block;height:100%}.entity-settings__entity-name{margin-top:1rem;font-weight:var(--calcite-font-weight-bold)}.entity-settings__deleteBtn{width:-moz-fit-content;width:fit-content}calcite-modal{--calcite-modal-context-text-internal:var(--calcite-font-size-0)}";export{v as arcgis_hub_entity_settings}