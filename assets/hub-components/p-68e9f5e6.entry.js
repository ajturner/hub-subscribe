import{r as e,h as t,F as i,H as r,a as o}from"./p-d4ba4c14.js";import{S as a,L as n,A as s,U as l,C as c,a as h}from"./p-c29c8d33.js";import{g as d}from"./p-4ddcf682.js";import{S as p}from"./p-d9f314b6.js";import{M as u}from"./p-e3973185.js";import{i as m}from"./p-be5c5009.js";const f=class{constructor(t){e(this,t),this.type=a.static,this.layout=n.simple,this.cardTitle=void 0,this.textAlign=s.start,this.subtitle=void 0,this.value=void 0,this.valueColor="",this.unit=void 0,this.unitPosition=l.after,this.allowUnitFormatting=!0,this.trailingText=void 0,this.sourceLink=void 0,this.sourceTitle=void 0,this.allowLink=!0,this.popoverTitle=void 0,this.popoverDescription=void 0,this.shareable=!1,this.shareableByValue=!1,this.shareableByReference=!1,this.shareableOnHover=!1,this.corners=c.square,this.border=!0,this.scale=h.small,this.errorMessage=void 0,this.isLoading=!1,this.popoverVisible=!1}onColorChanged(e){this.updateCSSProp("--valueColor",e)}onCornersChanged(e){this.updateCSSProp("--cornerBorderRadius",e===c.round&&"10px")}async getState(){const{element:e}=this;return d(e,["hub-request-options","site"])}async componentWillLoad(){this.intl=await m.loadIntlForComponent(this.element)}componentDidLoad(){this.onColorChanged(this.valueColor),this.onCornersChanged(this.corners)}updateCSSProp(e,t){t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}renderHeader(e,i){return t("div",{class:"header",slot:"title"},t("div",{class:"header-upper"},t("h1",{class:"title"},e),t("calcite-icon",{class:`${i}`,icon:"information",id:"tooltip-button",onClick:()=>{this.popoverVisible=!0},onKeyDown:e=>{"Enter"==e.key&&(this.popoverVisible=!0)},scale:"m",tabIndex:this.popoverVisible?-1:0}),t("slot",{name:"header-media"})),t("div",{class:"header-lower"},this.renderSubtitle(this.subtitle)))}renderPopover(e,i,r){if(e&&i)return this.popoverVisible&&(r=`${r} open`),t("calcite-card",{"aria-hidden":!this.popoverVisible,class:r,id:"popover-container"},t("div",{class:"popover-header",slot:"title"},t("h3",null,e),t("calcite-icon",{icon:"x",onClick:()=>{this.popoverVisible=!1},onKeyDown:e=>{"Enter"==e.key&&(this.popoverVisible=!1)},role:"button",scale:"m",tabIndex:this.popoverVisible?0:-1})),t("p",null,i))}renderSubtitle(e){return e&&t("h2",{class:"subtitle"},e)}renderValue(e,i){let r=[t("span",{class:"value",key:e},e,t("slot",{name:"value-media"}))];return this.allowUnitFormatting&&i&&r.push(t("span",{class:"unit"},i)),this.allowUnitFormatting&&"before"===this.unitPosition&&r.reverse(),this._isLoading&&(r=t("calcite-loader",{label:this.intl.t("loading"),scale:"m",type:"indeterminite"})),r}shouldShowLink(e,t,i){switch(i){case a.static:return!(!e||!t);case a.dynamic:return e}}renderFooter(e,r,o,a,n){return t(i,null,t("div",{class:"footer",slot:"footer-start"},this.renderTrailingText(e),this.shouldShowLink(a,r,n)&&this.renderSourceLink(r,o,n),t("slot",{name:"footer"})))}renderTrailingText(e){return e&&t("p",{class:"trailing-text"},e)}shouldShowLaunchIcon(e,t){let i=!1;try{if(e===a.static){i=window.location.hostname!==new URL(t).hostname}}catch(e){}return i}renderSourceLink(e,i,r){const o=i||e,n=r===a.dynamic?this.intl.t("source"):"",s=this.shouldShowLaunchIcon(r,e)?"launch":"";return t("div",{class:"source-link-container"},t("span",null,n),t("calcite-link",{class:`source-link ${r}`,href:e,"icon-end":s},o))}getPremadeError(e){return{[u.generic]:{title:this.intl.t("genericError.title"),message:this.intl.t("genericError.message")},[u.timeout]:{title:this.intl.t("timeoutError.title"),message:this.intl.t("timeoutError.message")}}[e]}renderErrorMessage(e){let i=e;return e.premadeType&&(i=this.getPremadeError(e.premadeType)),t("calcite-notice",{icon:"exclamation-mark-circle",kind:"danger",open:!0,width:"full"},t("h3",{slot:"title"},null==i?void 0:i.title),t("p",{slot:"message"},null==i?void 0:i.message))}get _isLoading(){return!this.value||this.isLoading}renderContent(){return t(i,null,this.renderHeader(this.cardTitle,this.layout),t("div",{class:{"value-container-with-error":!!this.errorMessage,"value-container":!this.errorMessage}},this.errorMessage?this.renderErrorMessage(this.errorMessage):this.renderValue(this.value,this.unit)),this.renderFooter(this.trailingText,this.sourceLink,this.sourceTitle,this.allowLink,this.type),this.renderPopover(this.popoverTitle,this.popoverDescription,this.layout))}render(){return t(r,{"data-element":"stat-card"},t(p,{context:this,showShareUi:!!this.value},t("calcite-card",null,this.renderContent())))}static get assetsDirs(){return["locales"]}get element(){return o(this)}static get watchers(){return{valueColor:["onColorChanged"],corners:["onCornersChanged"]}}};f.style=':host{display:block;border-color:transparent;--calcite-border-radius-base:var(--cornerBorderRadius, "0");--calcite-loader-padding:.5rem}:host(:not([border])){--calcite-ui-border-2:transparent}.header{display:flex;flex-direction:column;align-items:center}.header-upper{display:flex;width:100%;align-items:center;justify-content:space-between}.header-lower{display:flex;width:100%;align-items:center;justify-content:space-between}.title{margin:0px;display:flex;font-weight:var(--calcite-font-weight-bold);line-height:1.375;color:var(--calcite-ui-text-1)}.header calcite-icon{display:none}.header calcite-icon.moreInfo{margin:0.25rem;display:block;cursor:pointer}#popover-container{display:none}#popover-container.moreInfo{width:-webkit-fill-available;width:-moz-available;width:stretch;height:-webkit-fill-available;height:-moz-available;height:stretch;--calcite-ui-foreground-1:#EFEFEF;--calcite-ui-border-2:#EFEFEF;position:absolute;top:0px;left:0px;margin:0.5rem;display:block}@keyframes out-right{0%{opacity:1;transform:translate3D(0, 0, 0)}100%{opacity:0;transform:translate3D(100%, 0, 0)}}#popover-container.moreInfo{animation:out-right 300ms ease-out forwards;--tw-shadow:0 1px 6px -1px rgba(0, 0, 0, 0.16), 0 1px 2px -1px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 1px 6px -1px var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}@keyframes in-left{0%{opacity:0;transform:translate3D(100%, 0, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}#popover-container.open.moreInfo{animation:in-left 300ms ease-out forwards}.popover-header{display:flex}.popover-header h3{margin:0px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#popover-container p{word-wrap:break-word;margin:0px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.popover-header calcite-icon{margin-left:auto;cursor:pointer}calcite-card.stat-card-background{position:relative}.subtitle{margin:0px;font-weight:var(--calcite-font-weight-normal);line-height:1.375;color:var(--calcite-ui-text-2)}.footer{display:flex;width:100%;flex-direction:column;align-items:flex-start}.footer ::slotted([slot="footer"]){width:100%}.value-container{display:flex;font-weight:var(--calcite-font-weight-bold);color:var(--valueColor, var(--calcite-ui-text-1))}.value-container-with-error{display:flex;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.value-container calcite-notice{color:var(--calcite-ui-text-1)}.trailing-text{margin:0px;font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-normal);line-height:1.375;color:var(--calcite-ui-text-2)}.source-link{display:none}.source-link.static{margin-top:0.125rem;display:block}.source-link.dynamic{margin-top:0.125rem;display:block}.source-link-container{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.source-link-container span{margin-right:0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}calcite-link{font-size:var(--calcite-font-size-0);line-height:1.25rem;overflow-wrap:anywhere}:host([unit-position="below"]) .value-container{flex-direction:column}:host([unit-position="below"]) .unit{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1);font-size:1rem;line-height:1.25rem}:host([unit-position="before"]) .unit{margin-right:0.25rem}:host([unit-position="after"]) .unit{margin-left:0.25rem}:host([text-align="center"]) .header-upper,:host([text-align="center"]) .header-lower,:host([text-align="center"]) .value-container,:host([text-align="center"]) .footer{align-items:center;justify-content:center;text-align:center}:host([text-align="center"]) .header-upper{flex-direction:column-reverse}:host([text-align="end"]) .header-upper,:host([text-align="end"]) .header-lower{justify-content:flex-end}:host([text-align="end"]) .value-container,:host([text-align="end"]) .footer{align-items:flex-end;justify-content:flex-end;text-align:right}:host([text-align="center"]) .subtitle{text-align:center}:host([text-align="end"]) .subtitle{text-align:end}:host([scale="l"]) .title{font-size:1.5rem;line-height:1.875rem}:host([scale="l"]) .subtitle{font-size:1.125rem;line-height:1.5rem}:host([scale="l"]) .value-container,:host([scale="l"]) .value-container-with-error{font-size:3.5rem;line-height:4rem}:host([scale="l"][unit-position="below"]) .unit{font-size:1.125rem}@media only screen and (max-width: 560px){:host([scale="l"]) .title{font-size:1.25rem;line-height:1.625rem}:host([scale="l"]) .value-container{font-size:2.5rem;line-height:3rem}}:host([scale="m"]) .title{font-size:1.25rem;line-height:1.625rem}:host([scale="m"]) .subtitle{font-size:1rem;line-height:1.375rem}:host([scale="m"]) .value-container,:host([scale="m"]) .value-container-with-error{font-size:2rem;line-height:2.5rem}:host([scale="s"]) .title{font-size:1.125rem;line-height:1.5rem}:host([scale="s"]) .subtitle{font-size:1rem;line-height:1.375rem}:host([scale="s"]) .value-container,:host([scale="s"]) .value-container-with-error{font-size:1.625rem;line-height:2rem}';export{f as arcgis_stat_card}