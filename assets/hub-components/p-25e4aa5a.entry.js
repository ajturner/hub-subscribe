import{r as t,h as i,a as s}from"./p-d4ba4c14.js";import{S as e}from"./p-d9f314b6.js";import{i as n}from"./p-be5c5009.js";const o=class{constructor(i){t(this,i),this.cardTitle=void 0,this.countdownDate=void 0,this.shareable=!1,this.shareableByValue=!1,this.shareableByReference=!1,this.shareableOnHover=!1,this.days=void 0,this.hours=void 0,this.minutes=void 0,this.seconds=void 0}onCountdownDateChange(t){this.intervalId&&this.cleanupCountdown(this.intervalId),this.initializeCountdown(t)}async componentWillLoad(){this.intl=await n.loadIntlForComponent(this.element)}async componentDidLoad(){this.countdownDate&&this.initializeCountdown(this.countdownDate)}disconnectedCallback(){this.cleanupCountdown(this.intervalId)}initializeCountdown(t){this.updateCountdown(t),this.intervalId=setInterval(this.updateCountdown.bind(this),1e3,t)}updateCountdown(t){const i=this.getTimeRemaining(t);this.days=i.days.toString(),this.hours=("0"+i.hours).slice(-2),this.minutes=("0"+i.minutes).slice(-2),this.seconds=("0"+i.seconds).slice(-2),i.total<=0&&this.cleanupCountdown(this.intervalId)}getTimeRemaining(t){const i=`${new Date(t).toISOString().split("T").shift()}T00:00:00.000`,s=Date.parse(i)-Date.parse((new Date).toString()),e=Math.floor(s/1e3%60),n=Math.floor(s/1e3/60%60),o=Math.floor(s/36e5%24);return{total:s,days:Math.floor(s/864e5),hours:o,minutes:n,seconds:e}}cleanupCountdown(t){clearInterval(t)}renderHeader(t){return i("div",{class:"header",slot:"title"},t&&i("h1",{class:"title"},t))}renderCountdown(){return["days","hours","minutes","seconds"].map((t=>i("div",null,i("span",{class:`${t} counter`},this[t]),i("div",{class:"unit"},this.intl.t(t)))))}renderError(){return i("calcite-notice",{kind:"danger",open:!0,scale:"m",width:"auto"},i("div",{slot:"title"},this.intl.t("countdownDateMissingError")))}render(){return this.countdownDate?i(e,{context:this,showShareUi:!0},i("calcite-card",null,this.renderHeader(this.cardTitle),i("div",{class:"countdown"},this.renderCountdown()))):this.renderError()}static get assetsDirs(){return["locales"]}get element(){return s(this)}static get watchers(){return{countdownDate:["onCountdownDateChange"]}}};o.style=":host{display:block}.countdown{display:flex}.countdown>div{display:flex;flex-direction:column;align-items:center;padding-right:1rem}.counter{font-size:var(--calcite-font-size-3);line-height:2rem}.unit{font-size:var(--calcite-font-size-1);line-height:1.5rem}";export{o as arcgis_countdown}