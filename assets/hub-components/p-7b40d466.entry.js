import{r as i,c as e,h as t,F as n,a as s}from"./p-d4ba4c14.js";import{i as r}from"./p-be5c5009.js";import{b as a}from"./p-fd260f2d.js";import{c as l}from"./p-b728aff4.js";import"./p-796574a4.js";
/**
* Regular Expression snippets to validate Google Analytics tracking code
* see http://code.google.com/apis/analytics/docs/concepts/gaConceptsAccounts.html#webProperty
*
* @author  Faisalman <movedpixel@gmail.com>
* @license http://www.opensource.org/licenses/mit-license.php
* @link    http://gist.github.com/faisalman
* @param   measurementId     string to be validated
* @return  Boolean
*/function o(i){const e=i.toString();return/^G-[A-Z0-9]{1,}$/gi.test(e)}function c(i){return o(i)||function(i){const e=i.toString();return/^ua-\d{4,9}-\d{1,4}$/i.test(e)}(i)}function d(i){return(null==i?void 0:i.length)>0}var u;!function(i){i.Google="google",i.Adobe="adobe",i.SiteImprove="siteImprove",i.ConsentMessage="consentMessage"}(u||(u={}));const h=class{constructor(t){var n,s,r,l,o,c;i(this,t),this.arcgisTelemetryConfigurationChange=e(this,"arcgisTelemetryConfigurationChange",7),this._tempConsentMessageValue=null===(n=this.consentMessage)||void 0===n?void 0:n.text,this._googleAnalyticsKeyValueTemp=null===(s=this.googleConfig)||void 0===s?void 0:s.measurementId,this._adobeTrackingServerValueTemp=null===(r=this.adobeConfig)||void 0===r?void 0:r.trackingServer,this._adobeTrackingServerSSLValueTemp=null===(l=this.adobeConfig)||void 0===l?void 0:l.trackingServerSSL,this._adobeLReportSuiteValueTemp=null===(o=this.adobeConfig)||void 0===o?void 0:o.reportSuite,this._siCodeValueTemp=null===(c=this.siteImproveConfig)||void 0===c?void 0:c.code,this.configuration={plugins:{}},this.allowGA3=!1,this.showArcgisOnlineDisclosure=void 0,this.ui="accordion",this.isUpdatingObj={},this.isListenerSetup={},this.configurationState=void 0,this.isConsentMessageValid=!0,this.isGAValid=null,this.isAdobeTrackingServerValid=null,this.isAdobeTrackingServerSSLValid=null,this.isALReportSuiteValid=null,this.isSIValid=null,a(this,"_assignConsentListener","_saveGoogleKey","_saveAdobeTrackingServer","_saveAdobeTrackingServerSSL","_saveAdobeReportSuite","_saveSiteCode","_validateGMeasurementID","_validateAdobeTrackingServer","_validateAdobeSSLTrackingServer","_validateAdobeReportSuite","_validateSICode","_validateConsentMessage")}get numberOfProviders(){const{googleConfig:i,adobeConfig:e,siteImproveConfig:t}=this;return[i,e,t].filter((i=>i&&!(null==i?void 0:i.disabled))).length}get _getConsentConfiguredMsg(){var i;return(null===(i=this.consentMessage)||void 0===i?void 0:i.disabled)?this.intl.t("notConfigured"):this.intl.t("configured")}get googleConfig(){var i,e,t,n;const s=null!==(n=null!==(e=null===(i=this.configurationState)||void 0===i?void 0:i.plugins)&&void 0!==e?e:null===(t=this.configuration)||void 0===t?void 0:t.plugins)&&void 0!==n?n:{},r=null==s?void 0:s[u.Google];if(r)return{disabled:Boolean(null==r?void 0:r.disabled),measurementId:null==r?void 0:r.measurementId}}get adobeConfig(){var i,e,t,n;const s=null!==(n=null!==(e=null===(i=this.configurationState)||void 0===i?void 0:i.plugins)&&void 0!==e?e:null===(t=this.configuration)||void 0===t?void 0:t.plugins)&&void 0!==n?n:{},r=null==s?void 0:s[u.Adobe];if(r)return{disabled:Boolean(null==r?void 0:r.disabled),trackingServer:null==r?void 0:r.trackingServer,trackingServerSSL:null==r?void 0:r.trackingServerSSL,reportSuite:null==r?void 0:r.reportSuite}}get siteImproveConfig(){var i,e,t,n;const s=null!==(n=null!==(e=null===(i=this.configurationState)||void 0===i?void 0:i.plugins)&&void 0!==e?e:null===(t=this.configuration)||void 0===t?void 0:t.plugins)&&void 0!==n?n:{},r=null==s?void 0:s[u.SiteImprove];if(r)return{disabled:Boolean(null==r?void 0:r.disabled),code:null==r?void 0:r.code}}get consentMessage(){var i,e;const t=null!==(e=null!==(i=this.configurationState)&&void 0!==i?i:this.configuration)&&void 0!==e?e:{},n=null==t?void 0:t[u.ConsentMessage];if(n)return{disabled:Boolean(null==n?void 0:n.disabled),text:null==n?void 0:n.text}}get isUpdating(){return Object.values(this.isUpdatingObj).reduce(((i,e)=>i||e),!1)}async componentWillLoad(){this.intl=await r.loadIntlForComponent(this.element)}componentDidLoad(){this.googleConfig&&this._validateGMeasurementID(),this.adobeConfig&&(this._validateAdobeTrackingServer(),this._validateAdobeReportSuite()),this.siteImproveConfig&&this._validateSICode(),this.consentMessage&&this._validateConsentMessage()}_assignConsentListener(i){this._tempConsentMessageValue=this._tempConsentMessageValue,i.addEventListener("arcgisHubRichTextChange",(i=>{var e;const t=null===(e=null==i?void 0:i.path)||void 0===e?void 0:e[0].value;this._tempConsentMessageValue=t})),i.addEventListener("focusout",(i=>{this._validateConsentMessage(i)}))}_addSwitchListener(i,e){null==this.isListenerSetup[i]&&(this.isListenerSetup[i]=!0,e.addEventListener("calciteSwitchChange",(e=>{var t;const n=!(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.checked);this._updateOutput(i,"disabled",n)})))}render(){return"accordion"===this.ui?this._renderAccordionUI():this._renderFlatUI()}_renderAccordionUI(){return t("calcite-accordion",{"selection-mode":"single"},t("calcite-accordion-item",{description:this.intl.t("enabled",{numberOfProviders:this.numberOfProviders}),heading:this.intl.t("accordionHeader1"),iconStart:"configure-popup"},this._renderProviderForms()),this.consentMessage&&t("calcite-accordion-item",{description:this._getConsentConfiguredMsg,heading:this.intl.t("accordionHeader2"),iconStart:"edit-attributes"},this._renderConsentForm()))}_renderFlatUI(){return t(n,null,this._renderProviderForms(),this.consentMessage&&this._renderConsentForm())}_renderProviderForms(){return[this.googleConfig&&this._renderGoogleAnalyticsForm(),this.adobeConfig&&this._renderAdobeForm(),this.siteImproveConfig&&this._renderSiteImproveForm(),this.showArcgisOnlineDisclosure&&this._renderInfoMsg()]}_renderConsentForm(){return this._renderProvider(this.intl.t("consentMessage"),this.consentMessage,u.ConsentMessage,t(n,null,t("div",null,t("strong",null,this.intl.t("consentMessageLabel"))),t("arcgis-hub-rich-text",{disabled:this.isUpdating,ref:this._assignConsentListener,toolbar:"link",value:this.consentMessage.text})),t("div",{class:"consent-message-info"},t("p",null,this.intl.t("consentMessageInfo")),t("p",null,t("strong",null,this.intl.t("consentGuidance")),"Â ",t("calcite-link",{href:"https://iapp.org/",target:"_blank"},this.intl.t("learnMore")))))}_renderProvider(i,e,n,s,r){const{disabled:a}=e;return t("div",{class:"provider"},t("div",{class:"provider-header"},t("header",null,i),t("div",{class:"provider-header__right-container"},1==this.isUpdatingObj[n]?this._renderLoader():null,t("calcite-switch",{checked:!a,disabled:this.isUpdating,ref:this._addSwitchListener.bind(this,n)}))),r,t("div",{class:a?"no-show":"internal-form"},s))}_renderLoader(){return t("calcite-loader",{label:this.intl.t("updating"),"no-padding":!0,scale:"s",type:"indeterminate"})}_updateOutput(i,e,t){var n,s;let r=l(null!==(n=this.configurationState)&&void 0!==n?n:this.configuration);r=Object.assign(Object.assign({},r),i===u.ConsentMessage?{consentMessage:Object.assign(Object.assign({},r.consentMessage),{[e]:t})}:{plugins:Object.assign(Object.assign({},null==r?void 0:r.plugins),{[i]:Object.assign(Object.assign({},null===(s=null==r?void 0:r.plugins)||void 0===s?void 0:s[i]),{[e]:t})})}),this.configurationState=r,this.arcgisTelemetryConfigurationChange.emit(r)}_renderInfoMsg(){return t("div",{class:"provider-subtext"},this.intl.t("providerInfo",{accountsLink:(...i)=>t("p",null,t("calcite-link",{href:"https://doc.arcgis.com/en/arcgis-online/get-started/create-account.htm#ESRI_SECTION1_24871ED982AC41ED86FF1937E7604CDE",target:"_blank"},i)),dataCollectionLink:(...i)=>t("p",null,t("calcite-link",{href:"https://doc.arcgis.com/en/arcgis-online/reference/faq.htm#ESRI_QUESTIONANSWER_AED97F28DCD84F7682623C2FA9E5CE49",target:"_blank"},i))}))}_renderGoogleAnalyticsForm(){let i="Google Analytics";return this.allowGA3||(i=`${i} (GA4)`),this._renderProvider(i,this.googleConfig,u.Google,t(n,null,t("calcite-label",{class:"form-input"},this.intl.t("measurementId"),t("calcite-input",{disabled:this.isUpdating,maxLength:30,onBlur:this._validateGMeasurementID,onCalciteInputInput:this._saveGoogleKey,placeholder:"G-XXXXXXXXXX",status:this._calcStatus(this.isGAValid),value:this.googleConfig.measurementId}),t("calcite-input-message",{hidden:!(null!=this.isGAValid&&!this.isGAValid),icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("googleInvalidForm"))),t("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},t("ul",null,t("li",null,this.intl.t("gaInfo1")),t("li",null,this.intl.t("gaInfo2")),t("li",null,this.intl.t("gaInfo3"))))))}_renderAdobeForm(){return this._renderProvider("Adobe Analytics",this.adobeConfig,u.Adobe,t(n,null,t("calcite-label",{class:"form-input"},this.intl.t("trackingServer"),t("calcite-input",{disabled:this.isUpdating,maxLength:256,onBlur:this._validateAdobeTrackingServer,onCalciteInputInput:this._saveAdobeTrackingServer,onLoad:this._validateAdobeTrackingServer,placeholder:`${this.intl.t("example")}: jimsbrims.sc.omtrdc.net`,status:this._calcStatus(this.isAdobeTrackingServerValid),value:this.adobeConfig.trackingServer}),t("calcite-input-message",{hidden:!(null!=this.isAdobeTrackingServerValid&&!this.isAdobeTrackingServerValid),icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),t("calcite-label",{class:"form-input"},this.intl.t("trackingServerSSL")," (",this.intl.t("optional"),")",t("calcite-input",{disabled:this.isUpdating,id:"tracking-server-ssl-input",maxLength:256,onBlur:this._validateAdobeSSLTrackingServer,onCalciteInputInput:this._saveAdobeTrackingServerSSL,placeholder:`${this.intl.t("example")}: data.example.com`,status:this._calcStatus(this.isAdobeTrackingServerSSLValid),value:this.adobeConfig.trackingServerSSL})),t("calcite-label",{class:"form-input"},this.intl.t("reportSuiteId"),t("calcite-input",{disabled:this.isUpdating,maxLength:256,onBlur:this._validateAdobeReportSuite,onCalciteInputInput:this._saveAdobeReportSuite,placeholder:"mySuiteID",status:this._calcStatus(this.isALReportSuiteValid),value:this.adobeConfig.reportSuite}),t("calcite-input-message",{hidden:!(null!=this.isALReportSuiteValid&&!this.isALReportSuiteValid),icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),t("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},t("ul",null,t("li",null,this.intl.t("readAbout")," ",t("calcite-link",{href:`https://experienceleague.adobe.com/docs/analytics/implementation/vars/config-vars/trackingserver.html?lang=${this.intl.locale}`,target:"_blank"},this.intl.t("trackingServer"))),t("li",null,this.intl.t("readAbout")," ",t("calcite-link",{href:`https://experienceleague.adobe.com/docs/analytics/implementation/vars/config-vars/trackingserversecure.html?lang=${this.intl.locale}`,target:"_blank"},this.intl.t("trackingServerSSL"))),t("li",null,this.intl.t("readAbout")," ",t("calcite-link",{href:`https://experienceleague.adobe.com/docs/analytics/admin/manage-report-suites/new-report-suite/t-create-a-report-suite.html?lang=${this.intl.locale}`,target:"_blank"},this.intl.t("reportSuiteId")))))))}_renderSiteImproveForm(){return this._renderProvider("Siteimprove",this.siteImproveConfig,u.SiteImprove,t(n,null,t("calcite-label",{class:"form-input"},this.intl.t("siteImproveCode"),t("calcite-input",{disabled:this.isUpdating,maxLength:30,onBlur:this._validateSICode,onCalciteInputInput:this._saveSiteCode,placeholder:"ABC1234",status:this._calcStatus(this.isSIValid),value:this.siteImproveConfig.code}),t("calcite-input-message",{hidden:!(null!=this.isSIValid&&!this.isSIValid),icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),t("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},t("ul",null,t("li",null,this.intl.t("siteImproveInfo",{providerName:"Siteimprove Code",codeExample:'"XXXXX"',calciteLink:(...i)=>t("calcite-link",{href:"https://help.siteimprove.com/support/solutions/articles/80000448448-adding-siteimprove-analytics-javascript-to-your-website",target:"_blank"},i)}))))))}_calcStatus(i){return null==i?null:i?"valid":"invalid"}_saveGoogleKey(i){this._googleAnalyticsKeyValueTemp=i.target.value}_saveAdobeTrackingServer(i){this._adobeTrackingServerValueTemp=i.target.value}_saveAdobeTrackingServerSSL(i){this._adobeTrackingServerSSLValueTemp=i.target.value}_saveAdobeReportSuite(i){this._adobeLReportSuiteValueTemp=i.target.value}_saveSiteCode(i){this._siCodeValueTemp=i.target.value}_validateGMeasurementID(i){this._validateForm("_googleAnalyticsKeyValueTemp",this.allowGA3?c:o,"isGAValid","measurementId",u.Google,"measurementId",i)}_validateAdobeTrackingServer(i){this._validateForm("_adobeTrackingServerValueTemp",d,"isAdobeTrackingServerValid","trackingServer",u.Adobe,"trackingServer",i)}_validateAdobeSSLTrackingServer(i){this._validateForm("_adobeTrackingServerSSLValueTemp",(()=>!0),"isAdobeTrackingServerSSLValid","trackingServerSSL",u.Adobe,"trackingServerSSL",i)}_validateAdobeReportSuite(i){this._validateForm("_adobeLReportSuiteValueTemp",d,"isALReportSuiteValid","reportSuite",u.Adobe,"reportSuite",i)}_validateSICode(i){this._validateForm("_siCodeValueTemp",d,"isSIValid","code",u.SiteImprove,"code",i)}_validateConsentMessage(i){this._validateForm("_tempConsentMessageValue",(()=>!0),"isConsentMessageValid","text",u.ConsentMessage,"text",i)}_validateForm(i,e,t,n,s,r,a){var l,o,c,d;let u=null!==(d=null!==(l=this[i])&&void 0!==l?l:null===(c=null===(o=null==a?void 0:a.path)||void 0===o?void 0:o[0])||void 0===c?void 0:c.value)&&void 0!==d?d:"";u=null==u?void 0:u.trim(),this[t]=e(u),this[t]&&this[n]!=u&&(this[n]=u,this._updateOutput(s,r,u))}static get assetsDirs(){return["locales"]}get element(){return s(this)}};h.style='.sc-arcgis-telemetry-configuration-h{display:block}.consent-message-info.sc-arcgis-telemetry-configuration{font-size:var(--calcite-font-size--2);line-height:1rem}.provider-subtext.sc-arcgis-telemetry-configuration{padding:0.625rem;padding-top:0px;font-size:var(--calcite-font-size--2);line-height:1rem}.provider.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-bottom:0.625rem;border-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);padding:0.625rem}.provider.sc-arcgis-telemetry-configuration header.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-bottom:0.625rem;font-weight:var(--calcite-font-weight-bold)}.provider-header.sc-arcgis-telemetry-configuration{display:flex;align-items:center;justify-content:space-between}.provider-header__right-container.sc-arcgis-telemetry-configuration{display:flex;width:33.333333%;align-items:center;justify-content:flex-end}.no-show.sc-arcgis-telemetry-configuration{display:none}.provider.sc-arcgis-telemetry-configuration .internal-form.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-right:0.625rem;margin-left:0.625rem}.form-input.sc-arcgis-telemetry-configuration calcite-input.sc-arcgis-telemetry-configuration,.form-input.sc-arcgis-telemetry-configuration calcite-input-message.sc-arcgis-telemetry-configuration{margin-left:0.5rem}#tracking-server-ssl-input.sc-arcgis-telemetry-configuration{margin-bottom:0.5rem}[ui="flat"].sc-arcgis-telemetry-configuration-h .provider.sc-arcgis-telemetry-configuration{border-width:0px;padding:0px}[ui="flat"].sc-arcgis-telemetry-configuration-h .provider.sc-arcgis-telemetry-configuration .internal-form.sc-arcgis-telemetry-configuration{margin-left:0px;margin-right:0px}[ui="flat"].sc-arcgis-telemetry-configuration-h .form-input.sc-arcgis-telemetry-configuration calcite-input.sc-arcgis-telemetry-configuration,[ui="flat"].sc-arcgis-telemetry-configuration-h .form-input.sc-arcgis-telemetry-configuration calcite-input-message.sc-arcgis-telemetry-configuration{margin-left:0px}';export{h as arcgis_telemetry_configuration}