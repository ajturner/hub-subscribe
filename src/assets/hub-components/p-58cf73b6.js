import{g as e,i as t,s as i,P as s}from"./p-6f931af6.js";import{g as a}from"./p-90dc0f6f.js";import{c as o,p as r,d as n,e as c,u as m,g as p,b as d,h as u,s as l,i as f}from"./p-85d6867e.js";import{d as y,e as K}from"./p-7b082f5d.js";import{g as w}from"./p-7202c430.js";import{g as v,a as g}from"./p-dd26efbb.js";import{g as b}from"./p-796574a4.js";import{c as j}from"./p-b728aff4.js";import{i as I}from"./p-59fd2498.js";import{g as h}from"./p-cea8413b.js";import{r as D}from"./p-16a95e5b.js";function V(){const t=e();return t.push({entityKey:"prompt",storeKey:"data.prompt"}),t.push({entityKey:"location",storeKey:"item.properties.location"}),t}function O(e,i,s){let o;return s.authentication&&(o=s.authentication.token),i.thumbnailUrl=a(e.item,s,o),i.createdDate=new Date(e.item.created),i.createdDateSource="item.created",i.updatedDate=new Date(e.item.modified),i.updatedDateSource="item.modified",i.isDiscussable=t(i),i}const P={name:"No title provided",tags:[],typeKeywords:["Hub Initiative"],catalog:{schemaVersion:0},permissions:[],schemaVersion:2,features:y,view:{featuredContentIds:[]}},R={item:{type:"Hub Initiative",title:"No Title Provided",description:"No Description Provided",snippet:"",tags:[],typeKeywords:["Hub Initiative"],properties:{slug:"",schemaVersion:2}},data:{view:{featuredContentIds:[]}}};function C(){const t=e();return t.push({entityKey:"status",storeKey:"data.status"}),t.push({entityKey:"catalog",storeKey:"data.catalog"}),t.push({entityKey:"permissions",storeKey:"data.permissions"}),t.push({entityKey:"contacts",storeKey:"data.contacts"}),t.push({entityKey:"timeline",storeKey:"data.timeline"}),t.push({entityKey:"metrics",storeKey:"item.properties.metrics"}),t.push({entityKey:"location",storeKey:"item.properties.location"}),t.push({entityKey:"features",storeKey:"data.settings.features"}),t}function H(e,i,s){var n;let c;return s.authentication&&(c=s.authentication.token),i.thumbnailUrl=a(e.item,s,c),i.createdDate=new Date(e.item.created),i.createdDateSource="item.created",i.updatedDate=new Date(e.item.modified),i.updatedDateSource="item.modified",i.isDiscussable=t(i),i.features=r((null===(n=e.data.settings)||void 0===n?void 0:n.features)||{},y),i.links=function(e,t){let i;return t.authentication&&(i=t.authentication.token),{self:v(e.id,t),siteRelative:`/initiatives2/${o(e)}`,workspaceRelative:w(e.type,o(e)),thumbnail:a(e,t,i)}}(e.item,s),i}async function N(e,t){const a=Object.assign(Object.assign({},P),e);a.slug||(a.slug=u(a.name,a.orgUrlKey)),a.slug=await n({slug:a.slug},t),a.typeKeywords=l(a.typeKeywords,a.slug),a.typeKeywords=i(a.typeKeywords,a.isDiscussable);const o=new s(C());let r=o.entityToStore(a,j(R));r=await f(r,t);let c=o.storeToEntity(r,{});return c=H(r,c,t),c}async function T(e,t){e.slug=await n({slug:e.slug,existingId:e.id},t),e.typeKeywords=i(e.typeKeywords,e.isDiscussable);const a=await c(e.id,t),o=new s(C()),r=o.entityToStore(e,a),p=await m(r,t);let d=o.storeToEntity(p,e);return d=H(a,d,t),d}function k(e,t){let i;return i=I(e)?h(e,t):p(e,t),i.then((e=>e?async function(e,t){let i=await d(e,t);i=await function(e){return 2===b(e,"item.properties.schemaVersion")||(e=function(e){if(b(e,"item.properties.schemaVersion")>=1.1)return e;{const t=j(e),i=b(t,"item.properties.contentGroupId");return t.data.catalog={schemaVersion:1,title:"Default Initiative Catalog",scopes:{item:{targetEntity:"item",filters:[{predicates:[{group:i?[i]:[]}]}]}},collections:[]},t.item.properties.schemaVersion=1.1,t}}(e)),Promise.resolve(e)}(i);return H(i,new s(C()).storeToEntity(i,{}),t)}(e,t):null))}async function x(e,t){const i=Object.assign(Object.assign({},t),{id:e});await D(i)}function S(e,i,s){var n;let c;return s.authentication&&(c=s.authentication.token),i.thumbnailUrl=a(e.item,s,c),i.createdDate=new Date(e.item.created),i.createdDateSource="item.created",i.updatedDate=new Date(e.item.modified),i.updatedDateSource="item.modified",i.isDiscussable=t(i),i.features=r((null===(n=e.data.settings)||void 0===n?void 0:n.features)||{},K),i.links=function(e,t){let i;return t.authentication&&(i=t.authentication.token),{self:v(e.id,t),siteRelative:g(e.type,o(e)),workspaceRelative:w(e.type,o(e)),thumbnail:a(e,t,i)}}(e.item,s),i}function U(){const t=e();return t.push({entityKey:"previewUrl",storeKey:"item.properties.previewUrl"}),t.push({entityKey:"siteSolutionId",storeKey:"data.siteSolutionId"}),t.push({entityKey:"recommendedTemplates",storeKey:"data.recommendedTemplates"}),t}export{P as D,S as a,U as b,O as c,x as d,N as e,k as f,V as g,T as u}