import{_ as t}from"./p-d763eacf.js";import{g as n}from"./p-377e1b5e.js";import{r}from"./p-dcdf7b57.js";import{a as e}from"./p-ad325ed1.js";function o(t){var n=JSON.parse(JSON.stringify(t));return n.data&&("undefined"!=typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?n.file=t.data:n.text=t.data,delete n.data),n}function a(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function i(t){return Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[1])}function u(t){return t.join(",")}var s=/[\x00-\x1F\x7F-\x9F\xA0]/g;function f(n,e){var o=c(n,e),a=t({httpMethod:"GET"},e);return r(o,a)}var c=function(t,r){return("string"==typeof r?r:n(r))+"/content/items/"+t};function m(n,e){var o=c(n,e)+"/data",a=t({httpMethod:"GET",params:{}},e);return a.file&&(a.params.f=null),r(o,a).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function d(n,e){var o=c(n,e)+"/resources",a=t({},e);return a.params=t({num:1e3},a.params),r(o,a)}function p(t,n){return x(t,"/resources/"+n.fileName,n.readAs||"blob",n)}function h(t,n){var e=c(t,n)+"/groups";return r(e,n)}function l(o){return a(o).then((function(a){var i=n(o)+"/content/users/"+a+"/items/"+o.id+"/status",u=e(o,["jobId","jobType"],{params:t({},o.params)});return r(i,u)}))}function v(n,r){return function(n,r){var e=r||{},o=e.fileName,a=e.readAs;return x(n,"/info/"+(void 0===o?"iteminfo.xml":o),void 0===a?"text":a,t({httpMethod:"GET"},r))}(n,t(t({},r),{fileName:"metadata/metadata.xml"}))}function x(n,e,o,a){var i=""+c(n,a)+e,u=t({params:{}},a),f=u.rawResponse;return u.rawResponse=!0,u.params.f=null,r(i,u).then((function(t){return f?t:"json"!==o?t[o]():t.text().then((function(t){return JSON.parse(t.replace(s,""))}))}))}export{m as a,h as b,v as c,a as d,u as e,l as f,f as g,p as h,i,d as j,o as s}