import{r as t,c as e,h as s,F as i,H as a,a as n}from"./p-d4ba4c14.js";import{b as o}from"./p-fd260f2d.js";import{c as l}from"./p-0373fd99.js";import{i as h}from"./p-be5c5009.js";import{d as r}from"./p-8cf4bd83.js";import{g as c,a as p,b as d,c as u}from"./p-4ddcf682.js";import{a as m}from"./p-b728aff4.js";import"./p-dfe5a97d.js";import"./p-796574a4.js";const b=class{constructor(s){t(this,s),this.arcgisHubCopyButtonClicked=e(this,"arcgisHubCopyButtonClicked",7),this.type="text",this.label=void 0,this.placeholder=void 0,this.buttonText=void 0,this.value=void 0,this.readonly=!1,this.disabled=!1,o(this,"onCopyButtonClick","handleCalciteInputInput")}async componentWillLoad(){this.intl=await h.loadIntlForComponent(this.element),"textarea"===this.type&&(this.buttonText=this.buttonText||this.intl.t("copyCode"))}handleCalciteInputInput(t){this.value=t.target.value}onCopyButtonClick(){this.arcgisHubCopyButtonClicked.emit(this.value),l(this.value)}renderCopyButton(t,e,i){return s("calcite-button",{class:"copy-button",disabled:this.disabled,iconStart:e,label:this.intl.t("copyButtonLabel"),onClick:this.onCopyButtonClick,slot:i},t)}render(){const t="text"===this.type;return s(a,null,s("calcite-label",null,s("slot",{name:"label"},this.label),t?s("calcite-input",{disabled:this.disabled,onCalciteInputInput:this.handleCalciteInputInput,placeholder:this.placeholder,readOnly:this.readonly,type:this.type,value:this.value},this.renderCopyButton(null,"copy-to-clipboard","action")):s(i,null,s("calcite-input",{disabled:this.disabled,placeholder:this.placeholder,readOnly:this.readonly,scale:"l",type:this.type,value:this.value}),this.renderCopyButton(this.buttonText))))}static get assetsDirs(){return["locales"]}get element(){return n(this)}};b.style=":host([type='textarea']) .copy-button{flex-shrink:1;align-self:flex-end;min-width:7rem}:host([type='textarea']) calcite-label{display:flex;flex-direction:column;min-width:-moz-fit-content;min-width:fit-content}.copy-button{height:2rem}";const y=class{constructor(s){t(this,s),this.hubTelemetry=e(this,"hubTelemetry",7),this.origin=void 0,this.pathname=void 0,this.search=void 0,this.hash=void 0,this.shareable=!1,this.shareableByValue=!1,this.shareableByReference=!1,this.referenceElement=void 0,this.domId=void 0,this.snippetByVal=void 0,this.snippetByRef=void 0,this.domId=m()}get linkUrl(){let t=new URL(location.href);const{origin:e,pathname:s,search:i,hash:a}=this;return e&&(t=new URL(e)),s&&(t.pathname=s,t.search=""),i&&(t.search=i),t.hash=null!=a?a:"",t.href}async getCardState(){const t=this.referenceElement;return t.getState?await t.getState():c(this.referenceElement)}getSnippetByVal(t){if(this.referenceElement&&this.shareableByValue){const{domId:e,referenceElement:s}=this;return`${u("5.277.0")}\n${p(s,Object.assign(Object.assign({},t),{id:e}))}`}}getSnippetByRef(){const{referenceElement:t}=this;if(t&&this.shareableByReference)return`${u("5.277.0")}\n${d(t)}>`}async updateSnippets(){const{referenceElement:t}=this;if(t&&(this.shareableByReference||this.shareableByValue)){await customElements.whenDefined(t.tagName.toLowerCase());const e=await this.getCardState();this.snippetByVal=this.getSnippetByVal(e),this.snippetByRef=this.getSnippetByRef()}}async componentWillLoad(){this.intl=await h.loadIntlForComponent(this.element)}componentWillRender(){this.updateSnippets()}onCopyButtonClicked(t){t.stopPropagation();const e=Object.assign(Object.assign({},r.dictionary.category.interaction.action.share.label.link),{details:t.detail});this.hubTelemetry.emit(e)}render(){return s(a,{"data-element":"share"},this.shareable&&s("arcgis-copyable-input",{label:this.intl.t("copyLinkLabel"),readonly:!0,type:"text",value:this.linkUrl}),this.shareableByValue&&s("arcgis-copyable-input",{label:this.intl.t("copySnippetByValLabel"),readonly:!0,type:"textarea",value:this.snippetByVal}),this.shareableByReference&&s("arcgis-copyable-input",{label:this.intl.t("copySnippetByRefLabel"),readonly:!0,type:"textarea",value:this.snippetByRef}))}static get assetsDirs(){return["locales"]}get element(){return n(this)}};y.style=":host{display:block}";const f=class{constructor(s){t(this,s),this.hubTelemetry=e(this,"hubTelemetry",7),this.shareable=!1,this.shareableByValue=!1,this.shareableByReference=!1,this.referenceElement=void 0,this.shareableOnHover=!1,this.showShareUi=!0,this.modalIsOpen=!1,o(this,"onCalciteModalClose","onOpenModalButtonClick")}get isShareable(){const{shareable:t,referenceElement:e}=this;return t&&!!(null==e?void 0:e.id)}get shouldRender(){const{isShareable:t,shareableByValue:e,shareableByReference:s}=this;return t||e||s}get _messageOverrides(){return{close:this.intl.t("modalClose")}}onCalciteModalClose(){this.modalIsOpen=!1}onOpenModalButtonClick(){this.modalIsOpen=!0;const t=Object.assign({},r.dictionary.category.interaction.action.open.label.popover.details.share);this.hubTelemetry.emit(t)}async componentWillLoad(){this.intl=await h.loadIntlForComponent(this.element)}componentDidLoad(){if(!this.referenceElement){const t=this.element.shadowRoot.querySelector("slot");this.referenceElement=t.assignedElements()[0]}}renderSharingUi(){if(this.shouldRender)return s(i,null,s("label",{id:"sharing"},this.intl.t("shareableTooltip"),s("calcite-fab",{appearance:"outline-fill",icon:"share",kind:"neutral",label:this.intl.t("shareableTooltip"),onClick:this.onOpenModalButtonClick})),s("arcgis-wormhole",null,s("calcite-modal",{messageOverrides:this._messageOverrides,onCalciteModalClose:this.onCalciteModalClose,open:this.modalIsOpen,scale:"s"},s("div",{slot:"header"},this.intl.t("modalHeading")),s("div",{slot:"content"},this.modalIsOpen&&s("arcgis-share",{hash:this.referenceElement&&this.referenceElement.id,referenceElement:this.referenceElement,shareable:this.shareable,shareableByReference:this.shareableByReference,shareableByValue:this.shareableByValue})))))}render(){return s(a,{"data-element":"shareable-card",tabindex:this.shouldRender&&this.shareableOnHover?"0":void 0},s("slot",null),this.showShareUi&&this.renderSharingUi())}static get assetsDirs(){return["locales"]}get element(){return n(this)}};f.style=':host{display:flex;flex-direction:column}#sharing{display:flex;align-items:center;justify-content:flex-end;gap:0.5rem}#sharing>*{margin-top:0.125rem}:host([shareable-on-hover]){position:relative}:host([shareable-on-hover]) #sharing{pointer-events:none;position:absolute;top:100%;right:0px;left:0px;z-index:10;opacity:0;transition:opacity 150ms ease-out 2000ms}:host([shareable-on-hover]:hover) #sharing,:host([shareable-on-hover]:focus) #sharing{pointer-events:auto;opacity:1;transition:opacity 250ms ease-in 100ms}calcite-tooltip[aria-hidden="true"]{pointer-events:none}';export{b as arcgis_copyable_input,y as arcgis_share,f as arcgis_shareable_card}