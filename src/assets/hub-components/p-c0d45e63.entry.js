import{r as t,c as e,h as i,F as n,H as o,a as s}from"./p-d4ba4c14.js";import{i as c}from"./p-be5c5009.js";import{d as r}from"./p-8cf4bd83.js";import{b as a}from"./p-5d16ba9a.js";import{b as d}from"./p-b728aff4.js";import{d as h}from"./p-97274a47.js";import"./p-dfe5a97d.js";import"./p-796574a4.js";import"./p-3904125b.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-637ea136.js";import"./p-a0deb8c6.js";import"./p-30a7cbb2.js";import"./p-90dc0f6f.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-dcdf7b57.js";import"./p-6dcae6cd.js";import"./p-2acb70a6.js";const l=class{constructor(i){t(this,i),this.arcgisHubNewContentSuccess=e(this,"arcgisHubNewContentSuccess",7),this.hubTelemetry=e(this,"hubTelemetry",7),this.handleDropdownSelect=t=>{this.selectedEntityIdx=t.currentTarget.getAttribute("data-index"),this.handleEntitySelected()},this.handleResourceLinkClick=t=>{const e=t.currentTarget.getAttribute("data-value"),i=r.dictionary.category.navigation.action.new.label.content.details[e];i&&this.hubTelemetry.emit(i)},this.handleEntitySelected=()=>{var t,e;this.selectedEntity.href?r.dictionary.category.navigation.action.new.label.content.details[null===(t=this.selectedEntity)||void 0===t?void 0:t.key]?this.hubTelemetry.emit(r.dictionary.category.navigation.action.new.label.content.details[null===(e=this.selectedEntity)||void 0===e?void 0:e.key]):this.hubTelemetry.emit(r.dictionary.category.navigation.action.new.label.content):this.toggleForm(!0)},this.handleCalciteDropdownRef=t=>{if(t.shadowRoot&&!t.shadowRoot.querySelector("style[data-hub]")){const e=document.createElement("style");e.dataset.hub="",e.innerHTML=".calcite-dropdown-content { max-block-size: max-content !important; }",t.shadowRoot.appendChild(e)}},this.handleEntityEditorSaved=async t=>{const{entity:e,isSuccess:i}=t.detail;i&&(this.toggleForm(!1),this.arcgisHubNewContentSuccess.emit(e))},this.handleHubTelemetry=t=>{t.stopPropagation(),this.hubTelemetry.emit(t.detail)},this.toggleForm=async t=>{var e,i;this.isMobileDropdownOpen=!1,this.isFormOpen=t,this.selectedEntity&&this.hubTelemetry.emit(t?r.dictionary.category.interaction.action.open.label.modal.details[`create${d(null===(e=this.selectedEntity)||void 0===e?void 0:e.key)}`]:r.dictionary.category.interaction.action.close.label.modal.details[`create${d(null===(i=this.selectedEntity)||void 0===i?void 0:i.key)}`])},this.onOpenMobileDropdownButtonClick=()=>{this.isMobileDropdownOpen=!0},this.onCloseMobileDropdownButttonClick=()=>{this.isMobileDropdownOpen=!1},this.buttonAppearance=void 0,this.buttonColor=void 0,this.context=void 0,this.editorContext=void 0,this.entityConfigs=[],this.resourceLinks=[],this.renderAsDropdown=!1,this.buttonScale=void 0,this.isMobile=!1,this.selectedEntityIdx=void 0,this.isFormOpen=!1,this.isMobileDropdownOpen=!1}handleArcgisHubNewContentModalClosed(){this.toggleForm(!1),this.selectedEntityIdx=null}async componentWillLoad(){this.intl=await c.loadIntlForComponent(this.element)}get isSingleEntity(){return 1===this.entityConfigs.length}get selectedEntity(){return this.isSingleEntity?this.entityConfigs[0]:this.entityConfigs[this.selectedEntityIdx]}get hasResourceLinks(){return!!this.resourceLinks.length}get formTitle(){var t;return this.intl.t(`${null===(t=this.selectedEntity)||void 0===t?void 0:t.key}.title`)}get formDescription(){var t;return this.intl.t(`${null===(t=this.selectedEntity)||void 0===t?void 0:t.key}.description`)}get formIcon(){var t,e;return(null===(t=this.selectedEntity)||void 0===t?void 0:t.icon)||h(null===(e=this.selectedEntity)||void 0===e?void 0:e.key)}renderNewDropdownButton(t,e){let n;return n=this.isMobile?i("calcite-button",{appearance:this.buttonAppearance,kind:a(this.buttonColor),onClick:this.onOpenMobileDropdownButtonClick,scale:this.buttonScale},i("calcite-icon",{icon:"plus",scale:this.buttonScale})):this.isSingleEntity&&!this.renderAsDropdown?i("calcite-button",{appearance:this.buttonAppearance,href:t[0].href,kind:a(this.buttonColor),onClick:this.handleEntitySelected,scale:this.buttonScale},t[0].label):this.renderDropdown(t,e),n}renderDropdown(t,e){return i("calcite-dropdown",{ref:this.handleCalciteDropdownRef},i("calcite-button",{appearance:this.buttonAppearance,"icon-end":"caret-down",kind:a(this.buttonColor),scale:this.buttonScale,slot:"trigger"},this.intl.t("new")),this.renderDropdownContent(t,e))}renderMobileDropdown(t,e){return i("calcite-modal",{onCalciteModalClose:this.onCloseMobileDropdownButttonClick,open:this.isMobileDropdownOpen},i("div",{slot:"header"},this.intl.t("new")),i("div",{slot:"content"},this.renderDropdownContent(t,e)))}renderDropdownContent(t,e){return i(n,null,this.renderEntityItems(t),this.hasResourceLinks&&this.renderResourceLinks(e))}renderEntityItems(t){return i("calcite-dropdown-group",{class:{"hub-new-content_dropdown-group":!0,mobile:this.isMobile},"selection-mode":"none"},t.map(((t,e)=>this.renderEntityItem(t,e))))}renderEntityItem(t,e){var n;return i("calcite-dropdown-item",{"data-index":e,"data-value":t.key,href:t.href,key:t.key,onCalciteDropdownItemSelect:this.handleDropdownSelect,selected:t.key===(null===(n=this.selectedEntity)||void 0===n?void 0:n.key)},i("div",{class:"hub-new-content_dropdown-item"},i("div",{class:"hub-new-content_dropdown-item--left"},i("div",{class:"hub-new-content_dropdown-item-icon"},i("calcite-icon",{icon:t.icon,scale:"l"})),i("div",{class:"hub-new-content_dropdown-item-content"},i("div",{class:"hub-new-content_dropdown-item-title"},t.label),i("div",{class:"hub-new-content_dropdown-item-description"},t.description)))))}renderResourceLinks(t){return i("calcite-dropdown-group",{class:{"hub-new-content_dropdown-group":!0,mobile:this.isMobile},"selection-mode":"none"},t.map((t=>this.renderResourceLink(t))))}renderResourceLink(t){return i("calcite-dropdown-item",{"data-value":t.key,href:t.href,key:t.label,onClick:this.handleResourceLinkClick},i("calcite-link",null,t.label))}renderFormHeader(){return i("div",{class:"new-content-modal__header"},i("div",{class:"new-content-modal__header-icon"},i("calcite-icon",{icon:this.formIcon,scale:"l"})),i("h2",null,this.formTitle),i("span",null,this.formDescription))}renderForm(){return i("arcgis-wormhole",null,i("arcgis-hub-entity-editor",{context:this.context,editorContext:this.editorContext,editorType:`hub:${this.selectedEntity.key}:create`,isOpen:this.isFormOpen,layout:"modal",onArcgisHubEntityEditorSaved:this.handleEntityEditorSaved,onHubTelemetry:this.handleHubTelemetry},i("div",{slot:"header"},this.formTitle),i("div",{slot:"form-start"},this.renderFormHeader())))}render(){return i(o,{"data-element":this.isFormOpen?`new-${this.selectedEntity.key}-modal`:"new-content"},!!this.entityConfigs.length&&this.renderNewDropdownButton(this.entityConfigs,this.resourceLinks),this.isFormOpen&&this.renderForm(),this.isMobile&&this.renderMobileDropdown(this.entityConfigs,this.resourceLinks))}static get assetsDirs(){return["locales"]}get element(){return s(this)}};l.style=".sc-arcgis-hub-new-content-h{display:block}.sc-arcgis-hub-new-content-h:not([unthemed]) calcite-dropdown.sc-arcgis-hub-new-content{--calcite-ui-background:#f8f8f8;--calcite-ui-foreground-1:#ffffff;--calcite-ui-foreground-2:#f3f3f3}.sc-arcgis-hub-new-content-h:not([unthemed]) .hub-new-content_dropdown-group.sc-arcgis-hub-new-content{--calcite-ui-brand:var(--calcite-ui-border-1);--calcite-ui-text-1:#151515;--calcite-ui-text-2:#4a4a4a;--calcite-ui-text-3:#6a6a6a;--calcite-ui-border-1:#cacaca;--calcite-ui-border-3:#dfdfdf;--calcite-ui-text-link:#151515;--calcite-link-blue-underline:#151515}.hub-new-content_dropdown-group.sc-arcgis-hub-new-content:not(.mobile){max-width:20rem}.hub-new-content_dropdown-item.sc-arcgis-hub-new-content{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-top:0.25rem;padding-bottom:0.25rem}.hub-new-content_dropdown-item--left.sc-arcgis-hub-new-content{display:flex}.hub-new-content_dropdown-item-content.sc-arcgis-hub-new-content{display:flex;flex-direction:column}.hub-new-content_dropdown-item-icon.sc-arcgis-hub-new-content{height:70px;width:70px;margin-right:0.75rem;display:flex;align-items:center;background-color:var(--calcite-ui-background)}.hub-new-content_dropdown-item-icon.sc-arcgis-hub-new-content calcite-icon.sc-arcgis-hub-new-content{width:70px}.hub-new-content_dropdown-item-title.sc-arcgis-hub-new-content,.hub-new-content_dropdown-item-description.sc-arcgis-hub-new-content,calcite-dropdown-item.sc-arcgis-hub-new-content calcite-link.sc-arcgis-hub-new-content{font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-normal);font-size:var(--calcite-font-size--1);line-height:1.375rem;white-space:normal;overflow-wrap:break-word}.hub-new-content_dropdown-item-title.sc-arcgis-hub-new-content{margin-bottom:0.25rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.hub-new-content_dropdown-item-description.sc-arcgis-hub-new-content{color:var(--calcite-ui-text-2)}.new-content-modal__header.sc-arcgis-hub-new-content{margin-bottom:2rem;display:flex;flex-direction:column;align-items:center;padding-left:2.5rem;padding-right:2.5rem}.new-content-modal__header.sc-arcgis-hub-new-content h2.sc-arcgis-hub-new-content{margin-bottom:1rem;margin-top:1rem;font-size:var(--calcite-font-size-2);line-height:1.5rem;font-weight:var(--calcite-font-weight-bold)}.new-content-modal__header-icon.sc-arcgis-hub-new-content{border-radius:50%;border-width:1px;border-style:solid}.new-content-modal__header-icon.sc-arcgis-hub-new-content calcite-icon.sc-arcgis-hub-new-content{margin:1.5rem}";export{l as arcgis_hub_new_content}