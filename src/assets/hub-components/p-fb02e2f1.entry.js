import{r as e,c as t,h as i,H as r,a as o}from"./p-d4ba4c14.js";import{i as s}from"./p-be5c5009.js";import{b as c}from"./p-fd260f2d.js";import{s as a,S as n,d as l}from"./p-a5a61c3e.js";import h from"@arcgis/core/Graphic.js";import{d as p}from"./p-8cf4bd83.js";import{C as d}from"./p-c8861654.js";import{o as u,b as v}from"./p-d1b12a9c.js";import"@arcgis/core/geometry/geometryEngine.js";import"./p-dfe5a97d.js";import"./p-796574a4.js";import"./p-dcdf7b57.js";const m=class{constructor(i){e(this,i),this.hubTelemetry=t(this,"hubTelemetry",7),this.entity=void 0,this.context=void 0,c(this,"handleNewNoticeClose")}async componentWillLoad(){this.intl=await s.loadIntlForComponent(this.element),this.orgExtent=await u(this.context.hubRequestOptions)}get hasLocation(){return this.entity.location&&"none"!==this.entity.location.type}get extent(){return this.hasLocation?v(this.entity.location.extent):this.orgExtent}get graphics(){const{geometries:e=[]}=this.entity.location;return this.hasLocation?e.length?e.map((e=>new h({geometry:e,symbol:a[e.type](n.DEFAULT,l[e.type])}))):[{symbol:a.polygon(n.DEFAULT,l.polygon),geometry:Object.assign({type:"extent"},this.extent)}]:[]}handleNewNoticeClose(){localStorage.setItem("shouldHideProjectNewNotice","true"),this.hubTelemetry.emit(p.dictionary.category.interaction.action.close.label.alert.details.projectWorkspaceIntroNotice)}renderPageViews(){const e=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})).setHours(2,30,0,0),t=Date.parse((new Date).toLocaleString("en-US",{timeZone:"America/New_York"})),r=(Math.round(2*((t-e)/36e5>0?(t-e)/36e5:24+(t-e)/36e5))/2).toLocaleString(this.intl.locale),o=new Date(new Date(e).setDate(new Date(e).getDate()-30)).toISOString(),s=new Date(e).toISOString();return i("arcgis-telemetry-report",{contentId:`portal:${this.entity.id}`,context:this.context,dimensionFilters:[{name:"action",not:[p.constants.action.MANAGE]}],endDate:s,hostname:window.location.hostname,reportTitle:this.intl.t("telemetry.pageViews"),startDate:o,subtitle:this.intl.t("telemetry.last30days"),telemetryEvent:d["page-views"],trailingText:this.intl.t("telemetry.lastUpdated",{hoursElapsed:r}),type:"metric"})}renderMetadata(){return i("div",null,i("arcgis-hub-entity-metadata",{context:this.context,entity:this.entity,exclude:["access"]}))}renderLearnAboutNotice(){return i("calcite-notice",{icon:"lightbulb",kind:"brand",open:!0,width:"full"},i("arcgis-hub-workspace-link",{href:"https://doc.arcgis.com/en/hub/initiatives/projects-faq.htm",iconEnd:"launch",slot:"link",target:"_blank",telemetry:p.dictionary.category.navigation.action.external.label.webHelp.details.learnMoreAboutHubProjects},this.intl.t("learnAbout")))}renderFeedbackNotice(){return i("calcite-notice",{icon:"survey",kind:"brand",open:!0,width:"full"},i("div",{slot:"message"},this.intl.t("feedbackNotice.message")),i("arcgis-hub-workspace-link",{href:"https://arcg.is/XWXWG0",iconEnd:"launch",slot:"link",target:"_blank",telemetry:p.dictionary.category.navigation.action.external.label.customerFeedback.details.hubProjectFeedbackSurvey},this.intl.t("feedbackNotice.link")))}renderNewNotice(){return i("calcite-notice",{class:"project-overview__new-notice",closable:!0,icon:"lightbulb",kind:"brand",onCalciteNoticeClose:this.handleNewNoticeClose,open:!0,width:"full"},i("div",{slot:"title"},this.intl.t("newNotice.title")),i("div",{slot:"message"},this.intl.t("newNotice.message"),i("calcite-icon",{class:"project-overview__new-notice-icon",icon:"effects",scale:"s"})),i("arcgis-hub-workspace-link",{href:"https://doc.arcgis.com/en/hub/initiatives/projects-faq.htm#anchor10",iconEnd:"launch",slot:"link",target:"_blank",telemetry:p.dictionary.category.navigation.action.external.label.webHelp.details.projectWorkspaceIntroNotice},this.intl.t("newNotice.link")))}renderStatusAndPurpose(){return i("div",{class:"project-overview__status-purpose-container"},i("calcite-chip",{appearance:"outline",icon:"complete"===this.entity.status?"check":"",scale:"l",value:this.entity.status},this.intl.t(`status.${this.entity.status}`)),i("div",{class:"project-overview__purpose"},this.renderPurpose()))}renderPurpose(){return this.entity.summary?i("div",null,this.entity.summary):i("div",{class:"project-overview__no-purpose-message"},this.intl.t("noPurposeSet"))}renderMap(){return i("arcgis-hub-map",{expand:1.5,extent:this.extent,graphics:this.graphics},this.hasLocation?null:i("div",{class:"project-overview__map-overlay"},i("div",{class:"project-overview__no-location-message"},this.intl.t("noLocationSet"))))}renderEditButton(){return i("div",null,i("arcgis-hub-workspace-link",{pane:"details"},i("calcite-button",{appearance:"outline",round:!0},this.intl.t("editDetails"))))}render(){return i(r,{"data-element":"project-overview"},i("arcgis-hub-workspace-pane",null,i("h2",{slot:"title"},this.intl.t("overview")),i("div",null,!localStorage.getItem("shouldHideProjectNewNotice")&&this.renderNewNotice(),i("div",{class:"project-overview__main"},this.renderStatusAndPurpose(),this.renderMap(),this.renderEditButton())),i("div",{slot:"side-panel"},this.renderLearnAboutNotice(),this.renderFeedbackNotice(),this.renderPageViews(),this.renderMetadata())))}static get assetsDirs(){return["locales"]}get element(){return o(this)}};m.style='.sc-arcgis-hub-project-overview-h{display:block;height:100%}.project-overview__new-notice-icon.sc-arcgis-hub-project-overview{--calcite-ui-icon-color:var(--calcite-ui-warning);padding-left:0.25rem}.project-overview__main.sc-arcgis-hub-project-overview{border-radius:10px;border:1px solid var(--calcite-ui-border-2);display:flex;flex-direction:column;gap:1rem;background-color:var(--calcite-ui-foreground-1);padding:1rem}calcite-chip.sc-arcgis-hub-project-overview{margin-right:1.5rem}h2[slot="title"].sc-arcgis-hub-project-overview{margin:0px;font-size:var(--calcite-font-size-4);line-height:2.5rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.project-overview__status-purpose-container.sc-arcgis-hub-project-overview{display:flex}calcite-chip.sc-arcgis-hub-project-overview,.project-overview__purpose.sc-arcgis-hub-project-overview{align-self:center}arcgis-hub-map.sc-arcgis-hub-project-overview{position:relative;aspect-ratio:200 / 133;height:20rem;width:100%}arcgis-hub-map.sc-arcgis-hub-project-overview .project-overview__map-overlay.sc-arcgis-hub-project-overview{position:absolute;z-index:10;display:flex;height:20rem;width:100%;flex-direction:column;justify-content:center;background-color:#0000004d;color:var(--calcite-ui-text-inverse)}.project-overview__no-location-message.sc-arcgis-hub-project-overview{text-align:center}.project-overview__no-purpose-message.sc-arcgis-hub-project-overview{font-style:italic;color:var(--calcite-ui-text-3)}';export{m as arcgis_hub_project_overview}