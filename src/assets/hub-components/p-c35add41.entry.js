import{r as t,h as i,H as s,a as e}from"./p-d4ba4c14.js";import{i as o}from"./p-be5c5009.js";import{C as a}from"./p-c29c8d33.js";import{M as r}from"./p-e3973185.js";import{g as h}from"./p-796574a4.js";const n=class{constructor(i){t(this,i),this.data=void 0,this.binnedData=void 0,this.category=void 0,this.error=void 0,this.reportTitle=void 0,this.titleTooltip=void 0,this.subtitle=void 0,this.trailingText=void 0,this.options=void 0,this.isLoading=void 0,this.timeLabel=void 0,this.dataLabel=void 0,this.value=void 0,this.isTransforming=!0}handleChange(){this.isLoading||this.transform(this.data,this.options).then((({value:t})=>{this.value=t})).finally((()=>{this.isTransforming=!1}))}async componentWillLoad(){this.intl=await o.getIntlForComponent(this.element),this.handleChange()}_transform(t,i){var s,e,o;const{requestParams:a}=i,r=a.metrics[0],n=h(t,r);return((null===(o=null===(e=null===(s=null==i?void 0:i.dataTransforms)||void 0===s?void 0:s.find((t=>t.name===r)))||void 0===e?void 0:e.value)||void 0===o?void 0:o.display)||(t=>t))(n)}async transform(t,i){let s;if(t){const e=this._transform(t[0],i);s=this.intl.formatNumber(e)}return{value:s}}renderFooter(){if(this.binnedData){const{category:t,binnedData:s,options:e,isLoading:o,timeLabel:a,dataLabel:r}=this,h={category:t,data:s,options:e,isLoading:o,timeLabel:a,dataLabel:r,type:"sparkline"};return!this.error&&i("arcgis-telemetry-chart",Object.assign({slot:"footer"},h))}}render(){return i(s,null,this.isLoading||this.isTransforming?i("arcgis-skeleton-loader",{active:!0,rows:5,showFooter:!0}):i("arcgis-stat-card",{cardTitle:this.reportTitle,corners:a.round,errorMessage:this.error?{premadeType:r.generic}:void 0,popoverTitle:this.titleTooltip,subtitle:this.subtitle,trailingText:this.trailingText,value:this.value},this.renderFooter()))}get element(){return e(this)}static get watchers(){return{data:["handleChange"],options:["handleChange"]}}};n.style="arcgis-telemetry-chart{height:75px}";export{n as arcgis_telemetry_metric}