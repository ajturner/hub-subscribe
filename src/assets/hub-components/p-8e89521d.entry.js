import{r as t,h as e,H as i,a}from"./p-d4ba4c14.js";import s from"@arcgis/core/Graphic.js";import{s as r,S as n,d as l}from"./p-a5a61c3e.js";import{i as o}from"./p-be5c5009.js";import{g as c}from"./p-81a9bee2.js";import{R as d}from"./p-2accb2bf.js";import{b as h}from"./p-fd260f2d.js";import{b as u}from"./p-d1b12a9c.js";import"@arcgis/core/geometry/geometryEngine.js";import"./p-859c5360.js";import"./p-796574a4.js";import"./p-dcdf7b57.js";const m=class{constructor(e){t(this,e),this.initiative=void 0,this.initiativeId=void 0,this._context=c(),this.isMobile=void 0,h(this,"handleResize")}async componentWillLoad(){const t=document.createElement("link");t.href="https://js.arcgis.com/4.26/esri/themes/light/main.css",t.rel="stylesheet",this.element.shadowRoot.appendChild(t),this.intl=await o.loadIntlForComponent(this.element)}connectedCallback(){d.addHandler(this.element,this.handleResize)}disconnectedCallback(){d.unobserve(this.element)}handleResize(){this.isMobile=this.element.clientWidth<768}get hasLocation(){var t;return this.initiative.location&&"none"!==(null===(t=this.initiative.location)||void 0===t?void 0:t.type)}get extent(){var t;return this.hasLocation?u(null===(t=this.initiative.location)||void 0===t?void 0:t.extent):void 0}get graphics(){if(!this.hasLocation)return[];const{geometries:t=[]}=this.initiative.location;return t.length?t.map((t=>new s({geometry:t,symbol:r[t.type](n.DEFAULT,l[t.type])}))):[{symbol:r.polygon(n.DEFAULT,l.polygon),geometry:Object.assign({type:"extent"},this.extent)}]}renderMap(){return e("arcgis-hub-map",{disableMouseWheelZoom:!0,disablePinchZoomAndPanning:this.isMobile,expand:1.5,extent:this.extent,graphics:this.graphics},this.hasLocation?null:e("div",{class:"initiative-overview__map-overlay"},e("div",{class:"initiative-overview__no-location-message"},this.intl.t("noLocationSet"))))}renderMetricsField(){return e("div",null,e("h2",null,this.intl.t("ourProgress")),e("div",{class:"metrics-card-field"},e("arcgis-stat-card",{cardTitle:"Project alpha budget",key:"total",value:`${Math.round(100*Math.random()).toString()}m`}),e("arcgis-stat-card",{cardTitle:"Project beta budget",key:"total",value:`${Math.round(100*Math.random()).toString()}m`})),e("calcite-button",{appearance:"outline-fill",color:"blue",round:!0},this.intl.t("exploreAllMetrics")))}renderProjects(){return e("div",null,e("h2",null,this.intl.t("project")),e("arcgis-hub-gallery",{context:this._context,layout:"grid",limit:6,"link-target":"siteRelative",query:{targetEntity:"item",filters:[{predicates:[{type:"Hub Project"}]}]}}),e("calcite-button",{appearance:"outline-fill",color:"blue",round:!0},this.intl.t("exploreAllProjects")))}renderKeyMembers(){return e("div",null,e("h2",null,this.intl.t("whosInvolved")),e("arcgis-hub-gallery",{context:this._context,query:{targetEntity:"user",filters:[{predicates:[{id:["0326236361294abfa5fdcca705a081e6","506593e88b2d4e01a1613ccdcc83cd32"]}]}]},showEmptyState:!1}))}renderKeyDocument(){const t={targetEntity:"item",filters:[{predicates:[{id:this.initiative.view.featuredContentIds}]}]};return e("div",null,e("h2",null,this.intl.t("keyDocuments")),e("arcgis-hub-gallery",{context:this._context,limit:4,"link-target":"siteRelative",query:t,showAdditionalInfo:!1,showBadges:!1,showEmptyState:!1,showOwner:!1,showThumbnail:!1,showType:!1}),e("calcite-button",{appearance:"outline-fill",color:"blue",round:!0},this.intl.t("browseAllContent")))}render(){return e(i,{class:"entity-view"},e("div",{class:"entity-view-header"},e("h1",null,this.initiative.name),e("calcite-tabs",null,e("calcite-tab-nav",{slot:"title-group"},e("calcite-tab-title",{selected:!0},this.intl.t("tabs.overview")),e("calcite-tab-title",null,this.intl.t("tabs.projects")),e("calcite-tab-title",null,this.intl.t("tabs.metrics")),e("calcite-tab-title",null,this.intl.t("tabs.content")))),this.renderMap()),e("div",{class:"entity-view-body entity-view-main"},e("h2",null,this.intl.t("about")),e("div",null,this.initiative.summary),e("div",null,this.initiative.description),this.renderMetricsField(),this.renderProjects()),e("div",{class:"entity-view-body entity-view-side-bar"},e("div",{class:"entity-view-side-bar__project-status"},e("h2",null,"Initiative status"),e("calcite-chip",{icon:"",scale:"l",value:"in-progress"},"In progress")),e("div",{class:"entity-view-side-bar__metadata"},e("h2",null,this.intl.t("details")),e("arcgis-hub-entity-metadata",{context:this._context,entity:this.initiative,exclude:["owner","createdDate"]})),e("div",null,this.renderKeyMembers()),e("div",null,this.renderKeyDocument())))}static get assetsDirs(){return["locales"]}get element(){return a(this)}};m.style=':host{display:grid;column-gap:4rem;grid-template-columns:2fr 1fr;grid-template-areas:"header header"\n    "main sideBar"}h2{font-size:var(--calcite-font-size-3)}.flex-center{display:flex;align-items:center}.entity-view-header{grid-area:header;margin-bottom:1.5rem}.entity-view-body>div:not(:last-child){margin-bottom:2.5rem}calcite-icon{margin-right:0.75rem}arcgis-hub-map{height:400px}arcgis-hub-map .initiative-overview__map-overlay{position:absolute;z-index:10;display:flex;height:20rem;width:100%;flex-direction:column;justify-content:center;background-color:#0000004d;color:var(--calcite-ui-text-inverse)}.initiative-overview__no-location-message{text-align:center}.metrics-card-field{display:flex;justify-content:space-between;gap:1.5rem}arcgis-stat-card{width:50%}calcite-button{margin-top:1rem}.entity-view-main{grid-area:main}arcgis-hub-content-view{flex-basis:33%}calcite-chip{margin-right:0.5rem}.entity-view-side-bar{grid-area:sideBar}.entity-view-side-bar__initiative-status calcite-icon,.entity-view-side-bar__initiative-status h4{color:green}@media only screen and (max-width: 768px){:host{display:block}.entity-view-body{margin:0px}.entity-view-side-bar{margin-top:2.5rem}}';export{m as arcgis_hub_initiative_view}