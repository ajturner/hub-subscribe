import{r as t,c as e,h as i,H as s,a as n}from"./p-d4ba4c14.js";import{b as l}from"./p-fd260f2d.js";import{i as o}from"./p-be5c5009.js";import{R as a}from"./p-2accb2bf.js";import{a as r,T as c}from"./p-98a40899.js";const h=class{constructor(i){t(this,i),this.arcgisMultilineEllipsisExpand=e(this,"arcgisMultilineEllipsisExpand",7),this.arcgisMultilineEllipsisCollapse=e(this,"arcgisMultilineEllipsisCollapse",7),this.lines=void 0,this.expandEnabled=void 0,this.expandIcon=void 0,this.expandText=void 0,this.collapseEnabled=void 0,this.collapseIcon=void 0,this.collapseText=void 0,this.tooltipEnabled=void 0,this.tooltipText=void 0,this.tooltipPlacement=void 0,this.isOverflowing=!1,this.expanded=!1,l(this,"handleExpand","handleCollapse","handleRef","renderLink","checkIsOverflowing")}async componentWillLoad(){this.intl=await o.loadIntlForComponent(this.element)}componentDidLoad(){this.observe(),this.checkIsOverflowing()}connectedCallback(){this.observe()}disconnectedCallback(){this.unobserve()}observe(){const{p:t}=this;t&&a.addHandler(t,this.checkIsOverflowing)}unobserve(){const{p:t}=this;t&&a.unobserve(t)}handleExpand(){this.arcgisMultilineEllipsisExpand.emit().defaultPrevented||(this.expanded=!0)}handleCollapse(){this.arcgisMultilineEllipsisCollapse.emit().defaultPrevented||(this.expanded=!1)}handleRef(t){this.p=t}checkIsOverflowing(){const{p:t}=this;let e=!1;if(t){const i=(t,e)=>t<e-1,{clientHeight:s,clientWidth:n,scrollHeight:l,scrollWidth:o}=t,a=i(s,l);e=i(n,o)||a}this.isOverflowing=e}get styles(){const{expanded:t,lines:e}=this;return{"--lines":(t?0:e).toString()}}get _tooltipText(){return this.tooltipText||this.element.innerText}renderTooltip(){const{tooltipEnabled:t,_tooltipText:e,isOverflowing:s}=this;if(t&&s)return i("calcite-tooltip",{label:e,placement:this.tooltipPlacement,referenceElement:this.p},i("span",null,e))}renderLink(){const{intl:t,expanded:e,expandText:s,expandEnabled:n,collapseEnabled:l,expandIcon:o,isOverflowing:a,collapseText:r,collapseIcon:c}=this,h="rtl"===t.direction;let d;if(n&&a&&!e){const e=o||"chevron-down";d={iconEnd:e,iconStart:"",fn:this.handleExpand,label:s||t.t("readMore")},h&&Object.assign(d,{iconEnd:"",iconStart:e})}if(l&&e){const e=c||"chevron-up";d={iconEnd:e,iconStart:"",fn:this.handleCollapse,label:r||t.t("readLess")},h&&Object.assign(d,{iconEnd:"",iconStart:e})}if(d)return i("calcite-link",{"icon-end":d.iconEnd,"icon-start":d.iconStart,onClick:d.fn},d.label)}render(){return i(s,{style:this.styles},i("p",{ref:this.handleRef},i("slot",null)),this.renderLink(),this.renderTooltip())}static get assetsDirs(){return["locales"]}get element(){return n(this)}};var d;h.style=":host{display:block}:host p{margin:0px;text-overflow:ellipsis;overflow-wrap:break-word;font-size:var(--calcite-font-size--0);line-height:1.375rem;color:var(--calcite-ui-text-1);overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--lines)}::slotted(:last-child){margin:0 !important}:host calcite-link{margin:0px;margin-top:0.25rem;display:inline-block}",function(t){t.long="long",t.short="short",t.narrow="narrow"}(d||(d={}));const p=class{constructor(e){t(this,e),this.dateTime=void 0,this.tooltip=void 0,this.formatStyle=d.long}async componentWillLoad(){this.intl=await o.loadIntlForComponent(this.element)}get _date(){const{dateTime:t}=this;let e;return e="number"==typeof t?new Date(t):"string"==typeof t&&/^\d+$/.test(t)?new Date(parseInt(t,10)):new Date(t),e}get isoString(){return this._date.toISOString()}get localeString(){const{_date:t,intl:e}=this;return t.toLocaleString(e.locale,{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})}get relativeString(){const{_date:t,intl:e,formatStyle:i}=this,s=t.getTime(),n=Date.now()-s;let l;if(n<r.SECOND)l=e.t("now");else{let t,s;n<r.HOUR?(s=n/r.MINUTE,t=c.MINUTE):n<r.DAY?(s=n/r.HOUR,t=c.HOUR,s=n/r.HOUR):n<r.WEEK?(s=n/r.DAY,t=c.DAY):n<4*r.WEEK?(s=n/r.WEEK,t=c.WEEK):n<r.YEAR?(s=n/r.MONTH,t=c.MONTH):(s=n/r.YEAR,t=c.YEAR),l=e.formatRelativeTime(-1*(Math.floor(s)||1),t,{style:i})}return l}render(){return i(s,null,this.tooltip&&i("calcite-tooltip",{label:this.localeString,placement:"top",referenceElement:"time"},this.localeString),i("calcite-tooltip-manager",null,i("time",{dateTime:this.isoString,id:"time"},this.relativeString)))}static get assetsDirs(){return["locales"]}get element(){return n(this)}};p.style=':host{display:block}calcite-tooltip-manager{display:inline}calcite-tooltip[aria-hidden="true"]{pointer-events:none}';export{h as arcgis_multiline_ellipsis,p as arcgis_relative_date}