import{r as e,c as t,h as i,F as o,H as r,a}from"./p-d4ba4c14.js";import{b as s}from"./p-fd260f2d.js";import{i as n}from"./p-be5c5009.js";import{d as l}from"./p-8cf4bd83.js";import{b as c}from"./p-783242bc.js";import"./p-dfe5a97d.js";import"./p-dd26efbb.js";import"./p-d1b12a9c.js";import"./p-796574a4.js";import"./p-dcdf7b57.js";import"./p-a0deb8c6.js";import"./p-6dcae6cd.js";import"./p-637ea136.js";import"./p-3f64a9d9.js";import"./p-377e1b5e.js";import"./p-2acb70a6.js";import"./p-b728aff4.js";import"./p-903ef8af.js";const d=class{constructor(i){e(this,i),this.hubTelemetry=t(this,"hubTelemetry",7),this.buttonEl=void 0,this.username=void 0,this.fullName=void 0,this.thumbnail=void 0,this.userId=void 0,this.access=void 0,this.token=void 0,this.portal=void 0,this.region=void 0,this.organization=void 0,this.creatorUsername=void 0,this.postId=void 0,this.parentId=void 0,this.channelId=void 0,this.channelAccess=void 0,this.index=void 0,this.isHub=void 0,s(this,"handlePopoverOpened","handleGoToProfile","emitHubTelemetry")}async componentWillLoad(){this.intl=await n.loadIntlForComponent(this.element)}emitHubTelemetry(e){const{postId:t,parentId:i,channelId:o,channelAccess:r,index:a}=this;this.hubTelemetry.emit(Object.assign(Object.assign({},e),{postId:t,parentId:i,channelId:o,channelAccess:r,position:a}))}handlePopoverOpened(){this.emitHubTelemetry(l.dictionary.category.interaction.action.open.label.popover.details.details)}handleGoToProfile(){this.emitHubTelemetry(l.dictionary.category.navigation.action.view.label.users.details.profile)}renderCreatorAvatar(){const{username:e,fullName:t,thumbnail:o,portal:r,token:a,userId:s,access:n}=this;return i("calcite-avatar",{"full-name":t,scale:"l",thumbnail:o&&c(r,{username:e,access:n,thumbnail:o},a),"user-id":s,username:e})}renderCreatorDetails(){const{intl:e,username:t,fullName:r}=this;let a=e.t("anonymous"),s=e.t("noUser");return t&&(a=r||e.t("privateUser"),s=t),i(o,null,i("b",null,a),i("span",null,s))}renderCreatorExpandedDetails(){const{intl:e,region:t,organization:r,username:a,isHub:s}=this;if(t){const n=e.formatDisplayName(t.toLocaleUpperCase(),{type:"region"});return i(o,null,i("div",null,i("calcite-icon",{icon:"organization",scale:"s","text-label":e.t("orgLabel")}),r||e.t("privateOrg")),i("div",null,i("calcite-icon",{icon:"pin",scale:"s","text-label":e.t("location")}),n),s&&i("calcite-button",{appearance:"outline-fill",href:"/people/"+a,kind:"neutral",label:e.t("profile"),onClick:this.handleGoToProfile,round:!0,scale:"l",width:"full"},e.t("profile")))}}renderPostDetails(){const{intl:e,creatorUsername:t}=this;return i("footer",null,i("div",null,i("calcite-icon",{icon:"speech-bubbles",scale:"s"}),i("span",null,e.t("mentionedBy",{username:t}))))}render(){const{intl:e}=this;return i(r,{"data-element":"discussions-mention-popover"},this.buttonEl&&i("calcite-popover",{autoClose:!0,label:e.t("information"),overlayPositioning:"fixed",placement:"top",referenceElement:this.buttonEl},i("div",{class:"popover-body"},i("address",null,this.renderCreatorAvatar(),this.renderCreatorDetails()),this.renderCreatorExpandedDetails()),this.renderPostDetails()),i("button",{ref:e=>{this.buttonEl=e},type:"button"},i("slot",null)))}static get assetsDirs(){return["locales"]}get element(){return a(this)}};d.style=":host{display:inline-block}::slotted(calcite-link){font-size:var(--calcite-font-size-0) !important;line-height:1.25rem !important}calcite-popover{width:20rem}button{grid-row:span 2 / span 2;cursor:pointer;border-style:none;background-color:transparent;padding:0px}address{margin:0px;margin-bottom:1.5rem;display:grid;column-gap:0.75rem;row-gap:0px;font-style:normal;grid-template-columns:44px auto}address:last-child{margin:0px}calcite-avatar{grid-row:span 2 / span 2;height:2.75rem;width:2.75rem}address calcite-icon{grid-row:span 2 / span 2;height:2.75rem;width:2.75rem}address b{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}address span{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}address span:before{content:'@'}calcite-icon{margin-top:1px;margin-bottom:1px}.popover-body{margin:0px;padding:0.75rem}.popover-body div{margin-bottom:0.5rem;display:flex;align-items:flex-start;gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-ui-text-2)}.popover-body div+div{margin-bottom:1rem}.popover-body div+div:last-child{margin:0px}footer{padding:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-ui-text-1);background-color:var(--calcite-ui-background)}footer div{margin:0px;margin-bottom:0.5rem;display:flex;align-items:flex-start;gap:0.5rem}footer div:nth-of-type(3){margin-bottom:1rem}footer div:last-child{margin:0px}";export{d as arcgis_hub_discussions_mention_popover}